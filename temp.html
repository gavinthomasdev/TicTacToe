<!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML>
<HEAD>
<TITLE>Enscript Output</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#1F00FF" ALINK="#FF0000" VLINK="#9900DD">
<A NAME="top">
<A NAME="file1">
<H1>./src/main/java/dev/gavinthomas/tictactoe/opponents/Computer.java 1/24</H1>
[<A HREF="#top">top</A>][prev][<A HREF="#file2">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.opponents;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.List;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.ArrayList;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.function.Consumer;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.Opponent;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board.PieceType;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.utils.Minimax;
<B><FONT COLOR="#A020F0">import</FONT></B> out.Out;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Computer <B><FONT COLOR="#A020F0">implements</FONT></B> Opponent {
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> moves;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> PieceType PIECE;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Minimax AI;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Board board;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Consumer&lt;Point&gt; callback;
  <B><FONT COLOR="#A020F0">public</FONT></B> Computer(Board board, <B><FONT COLOR="#A020F0">final</FONT></B> PieceType PIECE, Consumer&lt;Point&gt; callback) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.callback = callback;
    <B><FONT COLOR="#A020F0">this</FONT></B>.board = board;
    <B><FONT COLOR="#A020F0">this</FONT></B>.PIECE = PIECE;
    <B><FONT COLOR="#A020F0">this</FONT></B>.AI = <B><FONT COLOR="#A020F0">new</FONT></B> Minimax(PIECE);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> PieceType getPiece() {
    <B><FONT COLOR="#A020F0">return</FONT></B> PIECE;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> getMove() {
<I><FONT COLOR="#B22222">//    if (board.tempGetCompMove == false) return null;
</FONT></I><I><FONT COLOR="#B22222">//    try {
</FONT></I><I><FONT COLOR="#B22222">//      Thread.sleep((long) (Math.random() * 1500) + 1000);
</FONT></I><I><FONT COLOR="#B22222">//    } catch (InterruptedException ignore) {}
</FONT></I>
    callback.accept(AI.getBest(board.grid));
    <I><FONT COLOR="#B22222">// return new Point();
</FONT></I>  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> canMove(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y, MoveOption moveOp) {
    <B><FONT COLOR="#A020F0">try</FONT></B> {
      <B><FONT COLOR="#A020F0">for</FONT></B> (Point pt : moveOp.openLocs) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (board.grid[x + pt.x][y + pt.y] != PieceType.BLANK) {
          <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">false</FONT></B>;
        }
      }
      <B><FONT COLOR="#A020F0">for</FONT></B> (Point pt : moveOp.ownLocs) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (board.grid[x + pt.x][y + pt.y] != PIECE) {
          <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">false</FONT></B>;
        }
      }
    
      System.out.println(board.grid[0][0]);
      <B><FONT COLOR="#A020F0">for</FONT></B> (Point pt : moveOp.oppLocs) {
        Out.append(board.grid[x + pt.x][y + pt.y]);
        <B><FONT COLOR="#A020F0">if</FONT></B> (board.grid[x + pt.x][y + pt.y] != (PIECE == PieceType.X ? PieceType.O : PieceType.X)) {
          <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">false</FONT></B>;
        }
      }
    } <B><FONT COLOR="#A020F0">catch</FONT></B> (IndexOutOfBoundsException e) {
      <I><FONT COLOR="#B22222">// System.out.println(&quot;IOBE&quot;);
</FONT></I>      <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">false</FONT></B>;
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">true</FONT></B>;
  }



  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> MoveOption {
    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> priority;
    <B><FONT COLOR="#A020F0">public</FONT></B> List&lt;Point&gt; openLocs = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Point&gt;();
    <B><FONT COLOR="#A020F0">public</FONT></B> List&lt;Point&gt; ownLocs = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Point&gt;();
    <B><FONT COLOR="#A020F0">public</FONT></B> List&lt;Point&gt; oppLocs = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Point&gt;();

    <B><FONT COLOR="#A020F0">public</FONT></B> MoveOption(<B><FONT COLOR="#A020F0">int</FONT></B> priority) {
      <B><FONT COLOR="#A020F0">this</FONT></B>.priority = priority;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> MoveOption open(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y) {
      <B><FONT COLOR="#A020F0">this</FONT></B>.openLocs.add(<B><FONT COLOR="#A020F0">new</FONT></B> Point(x, y));
      <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">this</FONT></B>;
    }
    
    <B><FONT COLOR="#A020F0">public</FONT></B> MoveOption own(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y) {
      <B><FONT COLOR="#A020F0">this</FONT></B>.ownLocs.add(<B><FONT COLOR="#A020F0">new</FONT></B> Point(x, y));
      <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">this</FONT></B>;
    }
    
    <B><FONT COLOR="#A020F0">public</FONT></B> MoveOption opp(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y) {
      <B><FONT COLOR="#A020F0">this</FONT></B>.oppLocs.add(<B><FONT COLOR="#A020F0">new</FONT></B> Point(x, y));
      <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">this</FONT></B>;
    }
  }
}


</PRE>
<HR>
<A NAME="file2">
<H1>./src/main/java/dev/gavinthomas/tictactoe/opponents/Player.java 2/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file1">prev</A>][<A HREF="#file3">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.opponents;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.function.Consumer;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.Opponent;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.input.Keycode;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board.PieceType;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Player <B><FONT COLOR="#A020F0">implements</FONT></B> Opponent {
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Board board;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Point selectedSpot = <B><FONT COLOR="#A020F0">new</FONT></B> Point(0, 0);
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> canMove = <B><FONT COLOR="#A020F0">false</FONT></B>;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Consumer&lt;Point&gt; callback;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> PieceType PIECE;
  
  <B><FONT COLOR="#A020F0">public</FONT></B> Player(Board board, PieceType PIECE, Consumer&lt;Point&gt; callback) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.callback = callback;
    <B><FONT COLOR="#A020F0">this</FONT></B>.board = board;
    <B><FONT COLOR="#A020F0">this</FONT></B>.PIECE = PIECE;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> PieceType getPiece() {
    <B><FONT COLOR="#A020F0">return</FONT></B> PIECE;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> handleInput(Object[] args) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (!canMove) <B><FONT COLOR="#A020F0">return</FONT></B>;
    Keycode key = (Keycode) args[0];
    <B><FONT COLOR="#A020F0">if</FONT></B> (key == Keycode.UP_ARROW &amp;&amp; selectedSpot.y != 2) {
      board.highlightSpot(selectedSpot.x, selectedSpot.y, <B><FONT COLOR="#A020F0">false</FONT></B>);
      board.highlightSpot(selectedSpot.x, selectedSpot.y + 1, <B><FONT COLOR="#A020F0">true</FONT></B>);
      selectedSpot.translate(0, 1);
    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (key == Keycode.DOWN_ARROW &amp;&amp; selectedSpot.y != 0) {
      board.highlightSpot(selectedSpot.x, selectedSpot.y, <B><FONT COLOR="#A020F0">false</FONT></B>);
      board.highlightSpot(selectedSpot.x, selectedSpot.y - 1, <B><FONT COLOR="#A020F0">true</FONT></B>);
      selectedSpot.translate(0, -1);
    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (key == Keycode.LEFT_ARROW &amp;&amp; selectedSpot.x != 0) {
      board.highlightSpot(selectedSpot.x, selectedSpot.y, <B><FONT COLOR="#A020F0">false</FONT></B>);
      board.highlightSpot(selectedSpot.x - 1, selectedSpot.y, <B><FONT COLOR="#A020F0">true</FONT></B>);
      selectedSpot.translate(-1, 0);
    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (key == Keycode.RIGHT_ARROW &amp;&amp; selectedSpot.x != 2) {
      board.highlightSpot(selectedSpot.x, selectedSpot.y, <B><FONT COLOR="#A020F0">false</FONT></B>);
      board.highlightSpot(selectedSpot.x + 1, selectedSpot.y, <B><FONT COLOR="#A020F0">true</FONT></B>);
      selectedSpot.translate(1, 0);
    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (key == Keycode.SPACE &amp;&amp; board.grid[selectedSpot.x][selectedSpot.y] == PieceType.BLANK) {
    <I><FONT COLOR="#B22222">// } else if (key == Keycode.SPACE) {
</FONT></I>      <I><FONT COLOR="#B22222">// System.out.println(selectedSpot.x + &quot;, &quot; + selectedSpot.y);
</FONT></I>      <B><FONT COLOR="#A020F0">this</FONT></B>.canMove = <B><FONT COLOR="#A020F0">false</FONT></B>;
      board.highlightSpot(selectedSpot.x, selectedSpot.y, <B><FONT COLOR="#A020F0">false</FONT></B>);
      <B><FONT COLOR="#A020F0">this</FONT></B>.callback.accept(selectedSpot);
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> getMove() {
    board.highlightSpot(selectedSpot.x, selectedSpot.y, <B><FONT COLOR="#A020F0">true</FONT></B>);
    <B><FONT COLOR="#A020F0">this</FONT></B>.canMove = <B><FONT COLOR="#A020F0">true</FONT></B>;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> getMove(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y) {
    selectedSpot.x = x;
    selectedSpot.y = y;
    getMove();
  }
}</PRE>
<HR>
<A NAME="file3">
<H1>./src/main/java/dev/gavinthomas/tictactoe/types/Opponent.java 3/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file2">prev</A>][<A HREF="#file4">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.types;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board.PieceType;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">interface</FONT></B> Opponent {
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> getMove();

  <B><FONT COLOR="#A020F0">public</FONT></B> PieceType getPiece();
}</PRE>
<HR>
<A NAME="file4">
<H1>./src/main/java/dev/gavinthomas/tictactoe/types/Visuals.java 4/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file3">prev</A>][<A HREF="#file5">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.types;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.ui.SelectionUI;

<B><FONT COLOR="#A020F0">import</FONT></B> java.text.MessageFormat;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">abstract</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Visuals {
<I><FONT COLOR="#B22222">//  private static final int[] xBlockVals2 = { 255, 0, 0 };
</FONT></I>  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String[] gridVals = { <B><FONT COLOR="#BC8F8F">&quot;\033[1B\033[58D&quot;</FONT></B> };
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String[] xBlockVals = { <B><FONT COLOR="#BC8F8F">&quot;\033[38;2;255;0;0m&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[0m\033[1B\033[10D&quot;</FONT></B> };
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String[] oBlockVals = { <B><FONT COLOR="#BC8F8F">&quot;\033[38;2;255;255;255m&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[0m\033[1B\033[10D&quot;</FONT></B> };
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String[] blankBlockVals = { <B><FONT COLOR="#BC8F8F">&quot;\033[0m&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[1B\033[10D&quot;</FONT></B> };
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String[] highlightVals = { <B><FONT COLOR="#BC8F8F">&quot;\033[38;2;0;255;0;1m&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[1B\033[18D&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[16C&quot;</FONT></B> };
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String[] titleVals = {<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[1B\033[70D&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[31m&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[0m&quot;</FONT></B>};
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String[] sizeUIVals = { <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[1B\033[19D&quot;</FONT></B> };
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String[] TITLELTRS = {
      <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;
████████╗
╚══██╔══╝
░░░██║░░░
░░░██║░░░
░░░██║░░░
░░░╚═╝░░░
&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;
██╗
██║
██║
██║
██║
╚═╝
&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;
░█████╗░
██╔══██╗
██║░░╚═╝
██║░░██╗
╚█████╔╝
░╚════╝░
&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;
████████╗
╚══██╔══╝
░░░██║░░░
░░░██║░░░
░░░██║░░░
░░░╚═╝░░░
&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;
░█████╗░
██╔══██╗
███████║
██╔══██║
██║░░██║
╚═╝░░╚═╝
&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;
░█████╗░
██╔══██╗
██║░░╚═╝
██║░░██╗
╚█████╔╝
░╚════╝░
&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;
████████╗
╚══██╔══╝
░░░██║░░░
░░░██║░░░
░░░██║░░░
░░░╚═╝░░░
&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;
░█████╗░
██╔══██╗
██║░░██║
██║░░██║
╚█████╔╝
░╚════╝░
&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;
███████╗
██╔════╝
█████╗░░
██╔══╝░░
███████╗
╚══════╝
&quot;</FONT></B><B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>};

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String GRID = MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;██████████████████████████████████████████████████████████{0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;██████████████████████████████████████████████████████████{0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  {0}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;                  ██                  ██                  &quot;</FONT></B>,
      (Object[]) gridVals);

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String XBLOCK = MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} ▄▄▄  ▄▄▄ {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}  ██▄▄██  {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}   ████   {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}    ██    {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}   ████   {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}  ██  ██  {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} ▀▀▀  ▀▀▀ {1}&quot;</FONT></B>,
      (Object[]) xBlockVals);

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String OBLOCK = MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}   ▄▄▄▄   {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}  ██▀▀██  {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} ██    ██ {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} ██    ██ {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} ██    ██ {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}  ██▄▄██  {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}   ▀▀▀▀   {1}&quot;</FONT></B>,
      (Object[]) oBlockVals);

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String BLANKBLOCK = MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}          {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}          {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}          {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}          {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}          {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}          {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}          {1}&quot;</FONT></B>,
      (Object[]) blankBlockVals);

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String HIGHLIGHT = MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}╭────────────────╮{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
                                                              
      <B><FONT COLOR="#BC8F8F">&quot;{0}╰────────────────╯&quot;</FONT></B>,
      (Object[]) highlightVals);

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String NOHIGHLIGHT = MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
          <B><FONT COLOR="#BC8F8F">&quot;{0}╭────────────────╮{1}&quot;</FONT></B> +
          <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
          <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
          <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
          <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
          <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
          <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +
          <B><FONT COLOR="#BC8F8F">&quot;{0}│{2}│{1}&quot;</FONT></B> +

          <B><FONT COLOR="#BC8F8F">&quot;{0}╰────────────────╯&quot;</FONT></B>,
      (Object[]) highlightVals);

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String UNHIGHLIGHT = MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}                  {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} {2} {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} {2} {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} {2} {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} {2} {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} {2} {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} {2} {1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0} {2} {1}&quot;</FONT></B> +
                                                              
      <B><FONT COLOR="#BC8F8F">&quot;{0}                  &quot;</FONT></B>,
      (Object[]) highlightVals);


  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String TITLE = MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}████████╗██╗░█████╗░&quot;</FONT></B> + <B><FONT COLOR="#BC8F8F">&quot;████████╗░█████╗░░█████╗░&quot;</FONT></B>.replaceAll(<B><FONT COLOR="#BC8F8F">&quot;█&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[31m█\033[0m&quot;</FONT></B>) + <B><FONT COLOR="#BC8F8F">&quot;████████╗░█████╗░███████╗{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}╚══██╔══╝██║██╔══██╗&quot;</FONT></B> + <B><FONT COLOR="#BC8F8F">&quot;╚══██╔══╝██╔══██╗██╔══██╗&quot;</FONT></B>.replaceAll(<B><FONT COLOR="#BC8F8F">&quot;█&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[31m█\033[0m&quot;</FONT></B>) + <B><FONT COLOR="#BC8F8F">&quot;╚══██╔══╝██╔══██╗██╔════╝{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}░░░██║░░░██║██║░░╚═╝&quot;</FONT></B> + <B><FONT COLOR="#BC8F8F">&quot;░░░██║░░░███████║██║░░╚═╝&quot;</FONT></B>.replaceAll(<B><FONT COLOR="#BC8F8F">&quot;█&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[31m█\033[0m&quot;</FONT></B>) + <B><FONT COLOR="#BC8F8F">&quot;░░░██║░░░██║░░██║█████╗░░{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}░░░██║░░░██║██║░░██╗&quot;</FONT></B> + <B><FONT COLOR="#BC8F8F">&quot;░░░██║░░░██╔══██║██║░░██╗&quot;</FONT></B>.replaceAll(<B><FONT COLOR="#BC8F8F">&quot;█&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[31m█\033[0m&quot;</FONT></B>) + <B><FONT COLOR="#BC8F8F">&quot;░░░██║░░░██║░░██║██╔══╝░░{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}░░░██║░░░██║╚█████╔╝&quot;</FONT></B> + <B><FONT COLOR="#BC8F8F">&quot;░░░██║░░░██║░░██║╚█████╔╝&quot;</FONT></B>.replaceAll(<B><FONT COLOR="#BC8F8F">&quot;█&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[31m█\033[0m&quot;</FONT></B>) + <B><FONT COLOR="#BC8F8F">&quot;░░░██║░░░╚█████╔╝███████╗{1}&quot;</FONT></B> +
      <B><FONT COLOR="#BC8F8F">&quot;{0}░░░╚═╝░░░╚═╝░╚════╝░&quot;</FONT></B> + <B><FONT COLOR="#BC8F8F">&quot;░░░╚═╝░░░╚═╝░░╚═╝░╚════╝░&quot;</FONT></B>.replaceAll(<B><FONT COLOR="#BC8F8F">&quot;█&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[31m█\033[0m&quot;</FONT></B>) + <B><FONT COLOR="#BC8F8F">&quot;░░░╚═╝░░░░╚════╝░╚══════╝{1}&quot;</FONT></B>,
      (Object[]) titleVals);



  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> String title1(<B><FONT COLOR="#A020F0">boolean</FONT></B>[] reds) {
    String[] vals = { <B><FONT COLOR="#BC8F8F">&quot;\033[0m\033[1B\033[20D&quot;</FONT></B>,
        (reds[0] ? <B><FONT COLOR="#BC8F8F">&quot;\033[38;2;255;0;0m&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;\033[37m&quot;</FONT></B>),
        (reds[1] ? <B><FONT COLOR="#BC8F8F">&quot;\033[38;2;255;0;0m&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;\033[37m&quot;</FONT></B>),
        (reds[2] ? <B><FONT COLOR="#BC8F8F">&quot;\033[38;2;255;0;0m&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;\033[37m&quot;</FONT></B>)
    };

    <B><FONT COLOR="#A020F0">return</FONT></B> MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{1}████████╗{2}██╗{3}░█████╗░{0}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{1}╚══██╔══╝{2}██║{3}██╔══██╗{0}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{1}░░░██║░░░{2}██║{3}██║░░╚═╝{0}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{1}░░░██║░░░{2}██║{3}██║░░██╗{0}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{1}░░░██║░░░{2}██║{3}╚█████╔╝{0}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{1}░░░╚═╝░░░{2}╚═╝{3}░╚════╝░\033[0m&quot;</FONT></B>,
        (Object[]) vals).replaceAll(<B><FONT COLOR="#BC8F8F">&quot;░&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[37m░\033[0m&quot;</FONT></B>);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> String title2(String color) {
    String[] vals = { <B><FONT COLOR="#BC8F8F">&quot;\033[&quot;</FONT></B> + color + <B><FONT COLOR="#BC8F8F">&quot;m&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[1B\033[25D&quot;</FONT></B> };

    <B><FONT COLOR="#A020F0">return</FONT></B> MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}████████╗░█████╗░░█████╗░{1}&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}╚══██╔══╝██╔══██╗██╔══██╗{1}&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}░░░██║░░░███████║██║░░╚═╝{1}&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}░░░██║░░░██╔══██║██║░░██╗{1}&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}░░░██║░░░██║░░██║╚█████╔╝{1}&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}░░░╚═╝░░░╚═╝░░╚═╝░╚════╝░&quot;</FONT></B>,
        (Object[]) vals);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> String title3(String color) {
    String[] vals = { <B><FONT COLOR="#BC8F8F">&quot;\033[&quot;</FONT></B> + color + <B><FONT COLOR="#BC8F8F">&quot;m&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[1B\033[25D&quot;</FONT></B> };

    <B><FONT COLOR="#A020F0">return</FONT></B> MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}████████╗░█████╗░███████╗{1}&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}╚══██╔══╝██╔══██╗██╔════╝{1}&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}░░░██║░░░██║░░██║█████╗░░{1}&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}░░░██║░░░██║░░██║██╔══╝░░{1}&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}░░░██║░░░╚█████╔╝███████╗{1}&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;{0}░░░╚═╝░░░░╚════╝░╚══════╝&quot;</FONT></B>,
        (Object[]) vals);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> String title(<B><FONT COLOR="#A020F0">boolean</FONT></B>[] reds) {
    StringBuilder finStr = <B><FONT COLOR="#A020F0">new</FONT></B> StringBuilder();
    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; TITLELTRS.length; i++) {
      String[] vals = { <B><FONT COLOR="#BC8F8F">&quot;\033[1B\033[&quot;</FONT></B> + (TITLELTRS[i].indexOf(<B><FONT COLOR="#BC8F8F">'\n'</FONT></B>)) + <B><FONT COLOR="#BC8F8F">&quot;D&quot;</FONT></B>,
          (reds[i] ? <B><FONT COLOR="#BC8F8F">&quot;\033[38;2;255;0;0m&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;\033[37m&quot;</FONT></B>),
          <B><FONT COLOR="#BC8F8F">&quot;\033[38;2;128;128;128m&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[0m&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[1C\033[5A&quot;</FONT></B>
      };
<I><FONT COLOR="#B22222">//      System.out.println(vals[1].replaceAll(&quot;\033&quot;, &quot;&quot;));
</FONT></I>      StringBuilder newLtrBldr = <B><FONT COLOR="#A020F0">new</FONT></B> StringBuilder();
      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> j = 0; j != -1; j = TITLELTRS[i].indexOf(<B><FONT COLOR="#BC8F8F">'\n'</FONT></B>, j + 1)) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (TITLELTRS[i].indexOf(<B><FONT COLOR="#BC8F8F">'\n'</FONT></B>, j + 1) == -1) <B><FONT COLOR="#A020F0">break</FONT></B>;
        newLtrBldr.append(TITLELTRS[i], j + (j == 0 ? 0 : 1), TITLELTRS[i].indexOf(<B><FONT COLOR="#BC8F8F">'\n'</FONT></B>, j + 1)).append(<B><FONT COLOR="#BC8F8F">&quot;{3}&quot;</FONT></B>);
        <B><FONT COLOR="#A020F0">int</FONT></B> nextLine = TITLELTRS[i].indexOf(<B><FONT COLOR="#BC8F8F">'\n'</FONT></B>, j + 1);
        <B><FONT COLOR="#A020F0">if</FONT></B> (TITLELTRS[i].indexOf(<B><FONT COLOR="#BC8F8F">'\n'</FONT></B>, nextLine + 1) != -1) newLtrBldr.append(<B><FONT COLOR="#BC8F8F">&quot;{0}&quot;</FONT></B>);
      }
      newLtrBldr.append(<B><FONT COLOR="#BC8F8F">&quot;{4}&quot;</FONT></B>);
<I><FONT COLOR="#B22222">//      String newStr = newLtrBldr.toString();
</FONT></I><I><FONT COLOR="#B22222">//      String newStr = newLtrBldr.toString().replaceAll(&quot;(░)+&quot;, &quot;{2}$0{3}&quot;);
</FONT></I>      String newStr = newLtrBldr.toString().replaceAll(<B><FONT COLOR="#BC8F8F">&quot;░&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>);
      newStr = newStr.replaceAll(<B><FONT COLOR="#BC8F8F">&quot;([╔═╝║╚╗█])+&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;{1}$0{3}&quot;</FONT></B>);
<I><FONT COLOR="#B22222">//      System.out.println(newStr);
</FONT></I><I><FONT COLOR="#B22222">//      System.out.println(MessageFormat.format(newStr, (Object[]) vals));
</FONT></I>      finStr.append(MessageFormat.format(newStr, (Object[]) vals));
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> finStr.toString();
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> String sizeUI(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y, <B><FONT COLOR="#A020F0">int</FONT></B> rx, <B><FONT COLOR="#A020F0">int</FONT></B> ry) {
    String xStr = <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>.repeat(7 - String.valueOf(x).length()) + x;
    String yStr = y + <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>.repeat(7 - String.valueOf(y).length());
    String rxStr = <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>.repeat(7 - String.valueOf(rx).length()) + rx;
    String ryStr = ry + <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>.repeat(7 - String.valueOf(ry).length());

    <B><FONT COLOR="#A020F0">return</FONT></B> MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{0}╭─────────────────╮{1}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{0}│     \033[1;4mMinimum\033[0m     │{1}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{0}│&quot;</FONT></B> + rxStr + <B><FONT COLOR="#BC8F8F">&quot; x &quot;</FONT></B> + ryStr + <B><FONT COLOR="#BC8F8F">&quot;│{1}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{0}│     \033[1;4mCurrent\033[0m     │{1}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{0}│&quot;</FONT></B> + xStr + <B><FONT COLOR="#BC8F8F">&quot; x &quot;</FONT></B> + yStr + <B><FONT COLOR="#BC8F8F">&quot;│{1}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{0}╰─────────────────╯{1}&quot;</FONT></B>,

        (Object[]) sizeUIVals);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> String menuButton(String text, SelectionUI.MODE mode) {
    String[] vals = { <B><FONT COLOR="#BC8F8F">&quot;\033[0m\033[1B\033[20D&quot;</FONT></B>,
        (mode == SelectionUI.MODE.DISABLED ? <B><FONT COLOR="#BC8F8F">&quot;\033[2m&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>),
        (mode == SelectionUI.MODE.SELECTED ? <B><FONT COLOR="#BC8F8F">&quot;\033[1m&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>),
        <B><FONT COLOR="#BC8F8F">&quot;\033[0m&quot;</FONT></B>
    };
    text = <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>.repeat((text.length() % 2 == 0 ? 9 : 8) - (text.length() / 2)) +
        text + <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>.repeat(9 - (text.length() / 2));
    String[] lines = (mode == SelectionUI.MODE.SELECTED ?
        <B><FONT COLOR="#A020F0">new</FONT></B> String[]{<B><FONT COLOR="#BC8F8F">&quot;━&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;┃&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;┏&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;┓&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;┛&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;┗&quot;</FONT></B>} :
        <B><FONT COLOR="#A020F0">new</FONT></B> String[]{<B><FONT COLOR="#BC8F8F">&quot;─&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;│&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;┌&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;┐&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;┘&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;└&quot;</FONT></B>});

    <B><FONT COLOR="#A020F0">return</FONT></B> MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{1}&quot;</FONT></B> + lines[2] + lines[0].repeat(18) + lines[3] + <B><FONT COLOR="#BC8F8F">&quot;{0}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{1}&quot;</FONT></B> + lines[1] + <B><FONT COLOR="#BC8F8F">&quot;{2}&quot;</FONT></B> + text + <B><FONT COLOR="#BC8F8F">&quot;{3}&quot;</FONT></B> + lines[1] + <B><FONT COLOR="#BC8F8F">&quot;{0}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;{1}&quot;</FONT></B> + lines[5] + lines[0].repeat(18) + lines[4] + <B><FONT COLOR="#BC8F8F">&quot;\033[0m&quot;</FONT></B>,
        (Object[]) vals);
  }


  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> String box(<B><FONT COLOR="#A020F0">int</FONT></B> w, <B><FONT COLOR="#A020F0">int</FONT></B> h) {
    String[] vals = {<B><FONT COLOR="#BC8F8F">&quot;\033[1B\033[&quot;</FONT></B> + w + <B><FONT COLOR="#BC8F8F">&quot;D&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[&quot;</FONT></B> + (w - 4) + <B><FONT COLOR="#BC8F8F">&quot;C&quot;</FONT></B>};
    <B><FONT COLOR="#A020F0">return</FONT></B> MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;█&quot;</FONT></B>.repeat(w) + <B><FONT COLOR="#BC8F8F">&quot;{0}&quot;</FONT></B> +
        <B><FONT COLOR="#BC8F8F">&quot;██{1}██{0}&quot;</FONT></B>.repeat(h - 2) +
        <B><FONT COLOR="#BC8F8F">&quot;█&quot;</FONT></B>.repeat(w),
        (Object[]) vals);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> String doubleLineBox(<B><FONT COLOR="#A020F0">int</FONT></B> w, <B><FONT COLOR="#A020F0">int</FONT></B> h) {
    String[] vals = {<B><FONT COLOR="#BC8F8F">&quot;\033[1B\033[&quot;</FONT></B> + w + <B><FONT COLOR="#BC8F8F">&quot;D&quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\033[&quot;</FONT></B> + (w - 2) + <B><FONT COLOR="#BC8F8F">&quot;C&quot;</FONT></B>};
    <B><FONT COLOR="#A020F0">return</FONT></B> MessageFormat.format(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;╔&quot;</FONT></B> + <B><FONT COLOR="#BC8F8F">&quot;═&quot;</FONT></B>.repeat(w - 2) + <B><FONT COLOR="#BC8F8F">&quot;╗&quot;</FONT></B> + <B><FONT COLOR="#BC8F8F">&quot;{0}&quot;</FONT></B> +
            <B><FONT COLOR="#BC8F8F">&quot;║{1}║{0}&quot;</FONT></B>.repeat(h - 2) +
            <B><FONT COLOR="#BC8F8F">&quot;╚&quot;</FONT></B> + <B><FONT COLOR="#BC8F8F">&quot;═&quot;</FONT></B>.repeat(w - 2) + <B><FONT COLOR="#BC8F8F">&quot;╝&quot;</FONT></B>,
        (Object[]) vals);
  }

}</PRE>
<HR>
<A NAME="file5">
<H1>./src/main/java/dev/gavinthomas/tictactoe/types/UIHolder.java 5/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file4">prev</A>][<A HREF="#file6">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.types;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">interface</FONT></B> UIHolder {

  Point offset();
  Point size();
  <B><FONT COLOR="#A020F0">void</FONT></B> render();

<I><FONT COLOR="#B22222">//  public Point getOffset();
</FONT></I>}
</PRE>
<HR>
<A NAME="file6">
<H1>./src/main/java/dev/gavinthomas/tictactoe/types/UIComponent.java 6/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file5">prev</A>][<A HREF="#file7">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.types;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">interface</FONT></B> UIComponent {
  <B><FONT COLOR="#A020F0">void</FONT></B> render();
  <B><FONT COLOR="#A020F0">void</FONT></B> endTasks();
}


</PRE>
<HR>
<A NAME="file7">
<H1>./src/main/java/dev/gavinthomas/tictactoe/utils/MoveList.java 7/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file6">prev</A>][<A HREF="#file8">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.utils;

<B><FONT COLOR="#A020F0">import</FONT></B> java.util.List;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.ArrayList;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.opponents.Computer.MoveOption;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">abstract</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> MoveList {
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> List&lt;MoveOption&gt; list = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;MoveOption&gt;();

  <B><FONT COLOR="#A020F0">static</FONT></B> {
    <I><FONT COLOR="#B22222">// opponent win positions
</FONT></I>    {
      <I><FONT COLOR="#B22222">// vertical
</FONT></I>      {
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(0, -1).opp(0, 1));
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(0, 1).opp(0, 2));
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(0, -1).opp(0, -2));
      }

      <I><FONT COLOR="#B22222">// horizontal
</FONT></I>      {
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(-1, 0).opp(1, 0));
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(1, 0).opp(2, 0));
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(-1, 0).opp(-2, 0));
      }
      
      <I><FONT COLOR="#B22222">// diagonal
</FONT></I>      {
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(-1, -1).opp(1, 1));
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(1, 1).opp(2, 2));
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(-1, -1).opp(-2, -2));
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(1, -1).opp(2, -2));
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(1, -1).opp(-1, 1));
        list.add(<B><FONT COLOR="#A020F0">new</FONT></B> MoveOption(9).opp(-1, 1).opp(-2, 2));
      }
    }
  }
}</PRE>
<HR>
<A NAME="file8">
<H1>./src/main/java/dev/gavinthomas/tictactoe/utils/Term.java 8/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file7">prev</A>][<A HREF="#file9">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.utils;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.input.InputQueue;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.input.input;

<B><FONT COLOR="#A020F0">import</FONT></B> java.util.ArrayList;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.List;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.Map;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.HashMap;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.function.Consumer;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Term {
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Map&lt;String, <B><FONT COLOR="#A020F0">int</FONT></B>[]&gt; cursorSaves = <B><FONT COLOR="#A020F0">new</FONT></B> HashMap&lt;String, <B><FONT COLOR="#A020F0">int</FONT></B>[]&gt;();
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> List&lt;String&gt; queue = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;&gt;();
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> enabled = <B><FONT COLOR="#A020F0">true</FONT></B>;

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> printQueue() {
    <B><FONT COLOR="#A020F0">for</FONT></B> (String s : queue) {
      System.out.print(s);
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> saveCursor() {
    <B><FONT COLOR="#A020F0">this</FONT></B>.print(<B><FONT COLOR="#BC8F8F">&quot;\033[s&quot;</FONT></B>);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> restoreCursor() {
    <B><FONT COLOR="#A020F0">this</FONT></B>.print(<B><FONT COLOR="#BC8F8F">&quot;\033[u&quot;</FONT></B>);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> setCursorPos(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.print(<B><FONT COLOR="#BC8F8F">&quot;\033[&quot;</FONT></B> + y + <B><FONT COLOR="#BC8F8F">&quot;;&quot;</FONT></B> + x + <B><FONT COLOR="#BC8F8F">&quot;H&quot;</FONT></B>);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> clear(<B><FONT COLOR="#A020F0">boolean</FONT></B> goHome) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.print(<B><FONT COLOR="#BC8F8F">&quot;\033[2J&quot;</FONT></B> + (goHome ? <B><FONT COLOR="#BC8F8F">&quot;\033[H&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>));
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> hideCursor(<B><FONT COLOR="#A020F0">boolean</FONT></B> tog) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.print(<B><FONT COLOR="#BC8F8F">&quot;\033[?25&quot;</FONT></B> + (tog ? <B><FONT COLOR="#BC8F8F">&quot;l&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;h&quot;</FONT></B>));
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> print(String outp) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (!enabled) {
      queue.add(outp);
      <B><FONT COLOR="#A020F0">return</FONT></B>;
    }
    System.out.print(outp);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> requestSize(Consumer&lt;Object[]&gt; callback) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.saveCursor();
    <B><FONT COLOR="#A020F0">this</FONT></B>.setCursorPos(50000, 50000);
    <B><FONT COLOR="#A020F0">this</FONT></B>.print(<B><FONT COLOR="#BC8F8F">&quot;\033[6n&quot;</FONT></B>);
    <B><FONT COLOR="#A020F0">this</FONT></B>.restoreCursor();
    input.queue.add(<B><FONT COLOR="#A020F0">new</FONT></B> InputQueue.TermSize.Builder(callback).args(<B><FONT COLOR="#A020F0">new</FONT></B> Object[]{InputQueue.ArgType.TERMSIZE}).build());
  }
}</PRE>
<HR>
<A NAME="file9">
<H1>./src/main/java/dev/gavinthomas/tictactoe/utils/listeners.java 9/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file8">prev</A>][<A HREF="#file10">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.utils;

<B><FONT COLOR="#A020F0">import</FONT></B> java.lang.reflect.Method;
<B><FONT COLOR="#A020F0">import</FONT></B> java.lang.reflect.Proxy;
<B><FONT COLOR="#A020F0">import</FONT></B> java.lang.reflect.InvocationHandler;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">abstract</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> listeners {
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> terminalResizeListener {
    <B><FONT COLOR="#A020F0">final</FONT></B> Runnable runner;

    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Handler <B><FONT COLOR="#A020F0">implements</FONT></B> InvocationHandler {
      @Override
      <B><FONT COLOR="#A020F0">public</FONT></B> Object invoke(Object proxy, Method method, Object[] args) {
        <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">null</FONT></B>;
      }
    }

    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> register() <B><FONT COLOR="#A020F0">throws</FONT></B> Throwable {
      
    }
    
    <B><FONT COLOR="#A020F0">public</FONT></B> terminalResizeListener(<B><FONT COLOR="#A020F0">final</FONT></B> Runnable runner) {
      <B><FONT COLOR="#A020F0">this</FONT></B>.runner = runner;
      <B><FONT COLOR="#A020F0">try</FONT></B> {
        Class&lt;?&gt; signalClass = Class.forName(<B><FONT COLOR="#BC8F8F">&quot;sun.misc.Signal&quot;</FONT></B>);
        <B><FONT COLOR="#A020F0">for</FONT></B> (Method m : signalClass.getDeclaredMethods()) {
          <B><FONT COLOR="#A020F0">if</FONT></B> (<B><FONT COLOR="#BC8F8F">&quot;handle&quot;</FONT></B>.equals(m.getName())) {
            Object windowResizeHandler = Proxy.newProxyInstance(getClass().getClassLoader(),
                <B><FONT COLOR="#A020F0">new</FONT></B> Class[] { Class.forName(<B><FONT COLOR="#BC8F8F">&quot;sun.misc.SignalHandler&quot;</FONT></B>) }, (proxy, method, args) -&gt; {
                  <B><FONT COLOR="#A020F0">if</FONT></B> (<B><FONT COLOR="#BC8F8F">&quot;handle&quot;</FONT></B>.equals(method.getName())) {
                    runner.run();
                  }
                  <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">null</FONT></B>;
                });
            m.invoke(<B><FONT COLOR="#A020F0">null</FONT></B>, signalClass.getConstructor(String.<B><FONT COLOR="#A020F0">class</FONT></B>).newInstance(<B><FONT COLOR="#BC8F8F">&quot;WINCH&quot;</FONT></B>), windowResizeHandler);
          }
        }
      } <B><FONT COLOR="#A020F0">catch</FONT></B> (Throwable ignore) {}
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> onExitListener {
    <B><FONT COLOR="#A020F0">public</FONT></B> onExitListener(Runnable runner) {
      Runtime.getRuntime().addShutdownHook(<B><FONT COLOR="#A020F0">new</FONT></B> Thread(runner));
    }
  }
}
</PRE>
<HR>
<A NAME="file10">
<H1>./src/main/java/dev/gavinthomas/tictactoe/utils/Minimax.java 10/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file9">prev</A>][<A HREF="#file11">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.utils;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board.PieceType;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.TTT;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.Arrays;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Minimax {
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> PieceType ownPiece, oppPiece;

  <B><FONT COLOR="#A020F0">public</FONT></B> Minimax(PieceType ownPiece) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.ownPiece = ownPiece;
    <B><FONT COLOR="#A020F0">this</FONT></B>.oppPiece = (ownPiece == PieceType.X ? PieceType.O : PieceType.X);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> eval(PieceType[][] board, <B><FONT COLOR="#A020F0">int</FONT></B> turns) {
    PieceType winner = TTT.getWinner(board);
    <B><FONT COLOR="#A020F0">if</FONT></B> (winner == ownPiece) {
      <B><FONT COLOR="#A020F0">return</FONT></B> 10 - turns;
    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (winner == oppPiece) {
      <B><FONT COLOR="#A020F0">return</FONT></B> -10 - turns;
    } <B><FONT COLOR="#A020F0">else</FONT></B> {
      <B><FONT COLOR="#A020F0">return</FONT></B> 0;
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> minimax(PieceType[][] board, <B><FONT COLOR="#A020F0">int</FONT></B> turns, <B><FONT COLOR="#A020F0">boolean</FONT></B> ownTurn, <B><FONT COLOR="#A020F0">int</FONT></B> alpha, <B><FONT COLOR="#A020F0">int</FONT></B> beta) {
    <B><FONT COLOR="#A020F0">int</FONT></B> evalVal = eval(board, turns);
    <B><FONT COLOR="#A020F0">if</FONT></B> (evalVal == 0 &amp;&amp; TTT.gameOver(board)) {
      <B><FONT COLOR="#A020F0">return</FONT></B> 0;
    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (evalVal != 0) {
      <B><FONT COLOR="#A020F0">return</FONT></B> evalVal;
    }

    <B><FONT COLOR="#A020F0">int</FONT></B> best = (ownTurn ? -1000 : 1000);

    <B><FONT COLOR="#A020F0">if</FONT></B> (turns &gt;= 10) <B><FONT COLOR="#A020F0">return</FONT></B> best;
    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> x = 0; x &lt; board.length; x++) {
      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> y = 0; y &lt; board[x].length; y++) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (board[x][y] != PieceType.BLANK) <B><FONT COLOR="#A020F0">continue</FONT></B>;
<I><FONT COLOR="#B22222">//        System.out.println(x + &quot;, &quot; + y);
</FONT></I>        board[x][y] = (ownTurn ? ownPiece : oppPiece);
        <B><FONT COLOR="#A020F0">int</FONT></B> retVal = minimax(board, turns + 1, !ownTurn, alpha, beta);
        best = (ownTurn ? Math.max(best, retVal) : Math.min(best, retVal));
        board[x][y] = PieceType.BLANK;
        <B><FONT COLOR="#A020F0">if</FONT></B> (ownTurn) {
          alpha = Math.max(alpha, best);
        } <B><FONT COLOR="#A020F0">else</FONT></B> {
          beta = Math.min(beta, best);
        }
        <B><FONT COLOR="#A020F0">if</FONT></B> (alpha &gt;= beta) <B><FONT COLOR="#A020F0">return</FONT></B> best;
      }
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> best;

  }

  <B><FONT COLOR="#A020F0">public</FONT></B> Point getBest(PieceType[][] boardArr) {
    <B><FONT COLOR="#A020F0">int</FONT></B> best = -1000;
    Point bestMove = <B><FONT COLOR="#A020F0">null</FONT></B>;

    PieceType[][] board = Arrays.copyOf(boardArr, boardArr.length);

    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> x = 0; x &lt; board.length; x++) {
      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> y = 0; y &lt; board[x].length; y++) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (board[x][y] != PieceType.BLANK) <B><FONT COLOR="#A020F0">continue</FONT></B>;
        board[x][y] = ownPiece;
        <B><FONT COLOR="#A020F0">int</FONT></B> move = minimax(board, 0, <B><FONT COLOR="#A020F0">false</FONT></B>, -1000, 1000);
        board[x][y] = PieceType.BLANK;
<I><FONT COLOR="#B22222">//        System.out.println(move + &quot; &gt; &quot; + best);
</FONT></I><I><FONT COLOR="#B22222">//        System.out.print(x + &quot;, &quot; + y + &quot;: &quot; + move + &quot; | &quot;);
</FONT></I>        <B><FONT COLOR="#A020F0">if</FONT></B> (move &gt;= best) {
          bestMove = <B><FONT COLOR="#A020F0">new</FONT></B> Point(x, y);
          best = move;
        }
      }
    }

    <B><FONT COLOR="#A020F0">return</FONT></B> bestMove;
  }
}
</PRE>
<HR>
<A NAME="file11">
<H1>./src/main/java/dev/gavinthomas/tictactoe/TTT.java 11/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file10">prev</A>][<A HREF="#file12">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board.PieceType;

<B><FONT COLOR="#A020F0">import</FONT></B> java.util.Arrays;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">abstract</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> TTT {
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> PieceType getWinner(PieceType[][] board) {
    <B><FONT COLOR="#A020F0">return</FONT></B> TTT.getWinner(board, board.length);
  }
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> PieceType getWinner(PieceType[][] board, <B><FONT COLOR="#A020F0">int</FONT></B> size) {
    <I><FONT COLOR="#B22222">// horizontals; x = column; y = row
</FONT></I>    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> y = 0; y &lt; size; y++) {
      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> x = 0; x &lt; size; x++) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (x == 0) {
          <B><FONT COLOR="#A020F0">continue</FONT></B>; <I><FONT COLOR="#B22222">// first value, so skip since nothing to compare to
</FONT></I>        }
        <B><FONT COLOR="#A020F0">if</FONT></B> (board[x - 1][y] != board[x][y] || board[x][y] == PieceType.BLANK) {
          <B><FONT COLOR="#A020F0">break</FONT></B>; <I><FONT COLOR="#B22222">// not all are same, or some are blank
</FONT></I>        }
        <B><FONT COLOR="#A020F0">if</FONT></B> (x + 1 == size) {
          <B><FONT COLOR="#A020F0">return</FONT></B> board[x][y]; <I><FONT COLOR="#B22222">// return the piece type since they would all match according to check above
</FONT></I>        }
      }
    }

    <I><FONT COLOR="#B22222">// verticals; x = column; y = row
</FONT></I>    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> x = 0; x &lt; size; x++) {
      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> y = 0; y &lt; size; y++) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (y == 0) {
          <B><FONT COLOR="#A020F0">continue</FONT></B>;
        }
        <B><FONT COLOR="#A020F0">if</FONT></B> (board[x][y - 1] != board[x][y] || board[x][y] == PieceType.BLANK) {
          <B><FONT COLOR="#A020F0">break</FONT></B>;
        }
        <B><FONT COLOR="#A020F0">if</FONT></B> (y + 1 == size) {
          <B><FONT COLOR="#A020F0">return</FONT></B> board[x][y];
        }
      }
    }
    <I><FONT COLOR="#B22222">// diagonals; xy = column &amp; row
</FONT></I><I><FONT COLOR="#B22222">//    if (size == 3) return null;
</FONT></I>    
    <I><FONT COLOR="#B22222">// bottom left to top right
</FONT></I>    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> xy = 0; xy &lt; size; xy++) {
      <B><FONT COLOR="#A020F0">if</FONT></B> (xy == 0) {
        <B><FONT COLOR="#A020F0">continue</FONT></B>;
      }
      <B><FONT COLOR="#A020F0">if</FONT></B> (board[xy - 1][xy - 1] != board[xy][xy] || board[xy][xy] == PieceType.BLANK) {
        <B><FONT COLOR="#A020F0">break</FONT></B>;
      }
      <B><FONT COLOR="#A020F0">if</FONT></B> (xy + 1 == size) {
        <B><FONT COLOR="#A020F0">return</FONT></B> board[xy][xy];
      }
    }
    <I><FONT COLOR="#B22222">// top left to bottom right; x = column; y = row
</FONT></I>    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> x = 0; x &lt; size; x++) {
      <B><FONT COLOR="#A020F0">int</FONT></B> y = Math.abs(x - size + 1);
      <B><FONT COLOR="#A020F0">if</FONT></B> (x == 0) {
        <B><FONT COLOR="#A020F0">continue</FONT></B>;
      }
      <B><FONT COLOR="#A020F0">if</FONT></B> (board[x - 1][y + 1] != board[x][y] || board[x][y] == PieceType.BLANK) {
        <B><FONT COLOR="#A020F0">break</FONT></B>;
      }
      <B><FONT COLOR="#A020F0">if</FONT></B> (x + 1 == size) {
        <B><FONT COLOR="#A020F0">return</FONT></B> board[x][y];
      }
    }
    
    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">null</FONT></B>;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> gameOver(PieceType[][] board) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (getWinner(board) != <B><FONT COLOR="#A020F0">null</FONT></B>) <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">true</FONT></B>;

    <B><FONT COLOR="#A020F0">for</FONT></B> (PieceType[] arr : board) {
      <B><FONT COLOR="#A020F0">for</FONT></B> (PieceType piece : arr) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (piece == PieceType.BLANK) {
          <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">false</FONT></B>;
        }
      }
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">true</FONT></B>;
  }
}</PRE>
<HR>
<A NAME="file12">
<H1>./src/main/java/dev/gavinthomas/tictactoe/input/InputQueue.java 12/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file11">prev</A>][<A HREF="#file13">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.input;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.function.Consumer;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.Arrays;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.List;

<B><FONT COLOR="#A020F0">import</FONT></B> java.util.regex.Pattern;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">abstract</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> InputQueue {
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> String codesToString(List&lt;Integer&gt; codes) {
    String str = <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>;
    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; codes.size(); i++) {
      str += Character.toString(codes.get(i));
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> str;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">interface</FONT></B> QueueType {
    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> matchStart(List&lt;Integer&gt; codes);

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> matches(List&lt;Integer&gt; codes);

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> run(List&lt;Integer&gt; codes);

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> priority();

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> doNext();
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> TermSize <B><FONT COLOR="#A020F0">implements</FONT></B> QueueType {
    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> PRIORITY;
    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> List&lt;Object&gt; ARGS;
    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Consumer&lt;Object[]&gt; RUNNER;
    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> DONEXT;

    <B><FONT COLOR="#A020F0">private</FONT></B> TermSize(Builder build) {
      <B><FONT COLOR="#A020F0">this</FONT></B>.PRIORITY = build.priority;
      <B><FONT COLOR="#A020F0">this</FONT></B>.ARGS = Arrays.asList(build.args);
      <B><FONT COLOR="#A020F0">this</FONT></B>.RUNNER = build.runner;
      <B><FONT COLOR="#A020F0">this</FONT></B>.DONEXT = build.doNext;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> matchStart(List&lt;Integer&gt; codes) {
      String cstr = codesToString(codes);
      <B><FONT COLOR="#A020F0">return</FONT></B> pats.termSizePrefix.matcher(cstr).matches();
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> matches(List&lt;Integer&gt; codes) {
      String cstr = codesToString(codes);
      <B><FONT COLOR="#A020F0">return</FONT></B> pats.termSize.matcher(cstr).matches();
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> run(List&lt;Integer&gt; codes) {
      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; ARGS.size(); i++) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (ARGS.get(i) == ArgType.CODES) {
          ARGS.set(i, codes);
        } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (ARGS.get(i) == ArgType.TERMSIZE) {
          StringBuilder xVal = <B><FONT COLOR="#A020F0">new</FONT></B> StringBuilder();
          StringBuilder yVal = <B><FONT COLOR="#A020F0">new</FONT></B> StringBuilder();
          <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> j = 0; j &lt; codes.size(); j++) {
            <B><FONT COLOR="#A020F0">if</FONT></B> (j &lt;= 1 || codes.get(j) == 59) <B><FONT COLOR="#A020F0">continue</FONT></B>;
            <B><FONT COLOR="#A020F0">if</FONT></B> (codes.get(j) == 82) <B><FONT COLOR="#A020F0">break</FONT></B>;
            <B><FONT COLOR="#A020F0">if</FONT></B> (xVal.length() != 0 || codes.get(j - 1) == 59) {
              xVal.append((<B><FONT COLOR="#A020F0">char</FONT></B>) codes.get(j).intValue());
            } <B><FONT COLOR="#A020F0">else</FONT></B> {
              yVal.append((<B><FONT COLOR="#A020F0">char</FONT></B>) codes.get(j).intValue());
            }
          }
          ARGS.set(i, <B><FONT COLOR="#A020F0">new</FONT></B> Point(Integer.parseInt(xVal.toString()), Integer.parseInt(yVal.toString())));
        }
      }
      RUNNER.accept(ARGS.toArray());
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> priority() {
      <B><FONT COLOR="#A020F0">return</FONT></B> PRIORITY;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> doNext() {
      <B><FONT COLOR="#A020F0">return</FONT></B> DONEXT;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Builder {
      <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> priority = 0;
      <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> doNext = <B><FONT COLOR="#A020F0">false</FONT></B>;
      <B><FONT COLOR="#A020F0">private</FONT></B> Object[] args = <B><FONT COLOR="#A020F0">new</FONT></B> Object[0];
      <B><FONT COLOR="#A020F0">private</FONT></B> Consumer&lt;Object[]&gt; runner;

      <B><FONT COLOR="#A020F0">public</FONT></B> Builder(Consumer&lt;Object[]&gt; runner) {
        <B><FONT COLOR="#A020F0">this</FONT></B>.runner = runner;
      }

      <B><FONT COLOR="#A020F0">public</FONT></B> Builder args(Object[] args) {
        <B><FONT COLOR="#A020F0">this</FONT></B>.args = args;
        <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">this</FONT></B>;
      }

      <B><FONT COLOR="#A020F0">public</FONT></B> Builder priority(<B><FONT COLOR="#A020F0">int</FONT></B> priority) {
        <B><FONT COLOR="#A020F0">this</FONT></B>.priority = priority;
        <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">this</FONT></B>;
      }

      <B><FONT COLOR="#A020F0">public</FONT></B> Builder doNext(<B><FONT COLOR="#A020F0">boolean</FONT></B> tog) {
        <B><FONT COLOR="#A020F0">this</FONT></B>.doNext = tog;
        <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">this</FONT></B>;
      }

      <B><FONT COLOR="#A020F0">public</FONT></B> TermSize build() {
        <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">new</FONT></B> TermSize(<B><FONT COLOR="#A020F0">this</FONT></B>);
      }
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> enum ArgType {
    CODES, TERMSIZE;
  }

  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">abstract</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> pats {
    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> Pattern termSize = Pattern.compile(<B><FONT COLOR="#BC8F8F">&quot;\033\\[(\\d+)\\;(\\d+)R&quot;</FONT></B>);
    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> Pattern termSizePrefix = Pattern.compile(
        <B><FONT COLOR="#BC8F8F">&quot;^((?:\033)|(?:\033\\[)|(?:\033\\[(?:\\d+))|(?:\033\\[(?:\\d+)\\;)|(?:\033\\[(?:\\d+)\\;(?:\\d+))|(?:\033\\[(?:\\d+)\\;(?:\\d+)R))$&quot;</FONT></B>);
  }
}</PRE>
<HR>
<A NAME="file13">
<H1>./src/main/java/dev/gavinthomas/tictactoe/input/Keybind.java 13/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file12">prev</A>][<A HREF="#file14">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.input;

<B><FONT COLOR="#A020F0">import</FONT></B> java.util.function.Consumer;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.Arrays;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.List;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.ArrayList;

<I><FONT COLOR="#B22222">// import tetris.enums.KeyType;
</FONT></I><I><FONT COLOR="#B22222">// import tetris.utils.*;
</FONT></I><I><FONT COLOR="#B22222">// import tetris.enums.Command;
</FONT></I><I><FONT COLOR="#B22222">// import tetris.enums.KeybindArgument;
</FONT></I><I><FONT COLOR="#B22222">// import tetris.enums.Keycode;
</FONT></I>

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Keybind {
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> List&lt;Object&gt; ARGS;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> List&lt;Keycode&gt; KEYS;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Consumer&lt;Object[]&gt; RUNNER;

  <I><FONT COLOR="#B22222">// new HashMap&lt;String, Object&gt;(Map.ofEntries(Map.entry(&quot;abc&quot;, 1), ...)); //
</FONT></I>  <I><FONT COLOR="#B22222">// Unlimited
</FONT></I>  <I><FONT COLOR="#B22222">// new HashMap&lt;String, Object&gt;(Map.of(&quot;abc&quot;, 1, ...)); // Up to 10
</FONT></I>
  <B><FONT COLOR="#A020F0">public</FONT></B> Keybind(Keycode key, Object[] args, Consumer&lt;Object[]&gt; runner) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.KEYS = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Keycode&gt;();
    <B><FONT COLOR="#A020F0">this</FONT></B>.KEYS.add(key);
    <B><FONT COLOR="#A020F0">this</FONT></B>.ARGS = replaceArgs(Arrays.asList(args));
    <B><FONT COLOR="#A020F0">this</FONT></B>.RUNNER = runner;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> Keybind(Keycode[] keys, Object[] args, Consumer&lt;Object[]&gt; runner) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.KEYS = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Keycode&gt;(Arrays.asList(keys));
    <B><FONT COLOR="#A020F0">this</FONT></B>.ARGS = replaceArgs(Arrays.asList(args));
    <B><FONT COLOR="#A020F0">this</FONT></B>.RUNNER = runner;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> Keybind(List&lt;Keycode&gt; keys, Object[] args, Consumer&lt;Object[]&gt; runner) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.KEYS = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Keycode&gt;(keys);
    <B><FONT COLOR="#A020F0">this</FONT></B>.ARGS = replaceArgs(Arrays.asList(args));
    <B><FONT COLOR="#A020F0">this</FONT></B>.RUNNER = runner;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> addKeys(Keycode key) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.KEYS.add(key);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> addKeys(Keycode key, Keycode... keys) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.KEYS.add(key);
    <B><FONT COLOR="#A020F0">this</FONT></B>.KEYS.addAll(Arrays.asList(keys));
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> removeKeys(Keycode key) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.KEYS.remove(key);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> removeKeys(Keycode key, Keycode... keys) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.KEYS.remove(key);
    <B><FONT COLOR="#A020F0">this</FONT></B>.KEYS.removeAll(Arrays.asList(keys));
  }

  <I><FONT COLOR="#B22222">// public boolean[] hasKeys(int key) {
</FONT></I>
  <I><FONT COLOR="#B22222">// }
</FONT></I>
  <I><FONT COLOR="#B22222">// public boolean[] hasKeys(int key, int... keys) {
</FONT></I>
  <I><FONT COLOR="#B22222">// }
</FONT></I>
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> hasKey(Keycode key) {
    <B><FONT COLOR="#A020F0">return</FONT></B> KEYS.contains(key);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> run(Keycode key) {
    List&lt;Object&gt; argCopy = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Object&gt;(ARGS);
    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; argCopy.size(); i++) {
      <B><FONT COLOR="#A020F0">if</FONT></B> (argCopy.get(i) == KeybindArgument.KEYCODE) {
        argCopy.set(i, key);
      }
    }
    RUNNER.accept(argCopy.toArray());
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> handle(Keycode key) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (props.enabled &amp;&amp; !props.forceDisabled &amp;&amp; System.currentTimeMillis() &gt; (props.lastUsed + props.cooldown)) {
      props.lastUsed = System.currentTimeMillis();
      run(key);
    }
  }

  <B><FONT COLOR="#A020F0">private</FONT></B> List&lt;Object&gt; replaceArgs(List&lt;Object&gt; args) {
    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; args.size(); i++) {
      <B><FONT COLOR="#A020F0">if</FONT></B> (args.get(i) == KeybindArgument.KEYBIND) {
        args.set(i, <B><FONT COLOR="#A020F0">this</FONT></B>);
      }
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> args;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Getters get = <B><FONT COLOR="#A020F0">new</FONT></B> Getters();
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Setters set = <B><FONT COLOR="#A020F0">new</FONT></B> Setters();
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Properties props = <B><FONT COLOR="#A020F0">new</FONT></B> Properties();

  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Properties {
    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> enabled = <B><FONT COLOR="#A020F0">true</FONT></B>;
    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> forceDisabled = <B><FONT COLOR="#A020F0">false</FONT></B>;
    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> cooldown = 0;
    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">long</FONT></B> lastUsed = 0;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Getters {
    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> enabled() {
      <B><FONT COLOR="#A020F0">return</FONT></B> props.enabled;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> cooldown() {
      <B><FONT COLOR="#A020F0">return</FONT></B> props.cooldown;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">long</FONT></B> lastUsed() {
      <B><FONT COLOR="#A020F0">return</FONT></B> props.lastUsed;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> forceDisabled() {
      <B><FONT COLOR="#A020F0">return</FONT></B> props.forceDisabled;
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Setters {
    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> enabled(<B><FONT COLOR="#A020F0">boolean</FONT></B> on) {
      RUNNER.accept(<B><FONT COLOR="#A020F0">new</FONT></B> Object[] { <B><FONT COLOR="#BC8F8F">&quot;abc&quot;</FONT></B> });
      props.enabled = on;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> cooldown(<B><FONT COLOR="#A020F0">int</FONT></B> time) {
      props.cooldown = time;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> lastUsed(<B><FONT COLOR="#A020F0">long</FONT></B> time) {
      props.lastUsed = time;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> forceDisabled(<B><FONT COLOR="#A020F0">boolean</FONT></B> tog) {
      props.forceDisabled = tog;
    }
  }
}</PRE>
<HR>
<A NAME="file14">
<H1>./src/main/java/dev/gavinthomas/tictactoe/input/KeybindArgument.java 14/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file13">prev</A>][<A HREF="#file15">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.input;

<B><FONT COLOR="#A020F0">public</FONT></B> enum KeybindArgument {
  KEYBIND, KEYCODE;
}</PRE>
<HR>
<A NAME="file15">
<H1>./src/main/java/dev/gavinthomas/tictactoe/input/Keycode.java 15/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file14">prev</A>][<A HREF="#file16">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.input;

<B><FONT COLOR="#A020F0">import</FONT></B> java.util.Arrays;


<B><FONT COLOR="#A020F0">public</FONT></B> enum Keycode {
  
  <I><FONT COLOR="#B22222">// lowercase letters
</FONT></I>  LOWER_A(97, <B><FONT COLOR="#BC8F8F">'a'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;a&quot;</FONT></B>), LOWER_B(98, <B><FONT COLOR="#BC8F8F">'b'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;b&quot;</FONT></B>), LOWER_C(99, <B><FONT COLOR="#BC8F8F">'c'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;c&quot;</FONT></B>), LOWER_D(100, <B><FONT COLOR="#BC8F8F">'d'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;d&quot;</FONT></B>), LOWER_E(101, <B><FONT COLOR="#BC8F8F">'e'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;e&quot;</FONT></B>),
  LOWER_F(102, <B><FONT COLOR="#BC8F8F">'f'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;f&quot;</FONT></B>), LOWER_G(103, <B><FONT COLOR="#BC8F8F">'g'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;g&quot;</FONT></B>), LOWER_H(104, <B><FONT COLOR="#BC8F8F">'h'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;h&quot;</FONT></B>), LOWER_I(105, <B><FONT COLOR="#BC8F8F">'i'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;i&quot;</FONT></B>), LOWER_J(106, <B><FONT COLOR="#BC8F8F">'j'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;j&quot;</FONT></B>),
  LOWER_K(107, <B><FONT COLOR="#BC8F8F">'k'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;k&quot;</FONT></B>), LOWER_L(108, <B><FONT COLOR="#BC8F8F">'l'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;l&quot;</FONT></B>), LOWER_M(109,<B><FONT COLOR="#BC8F8F">'m'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;m&quot;</FONT></B>), LOWER_N(110, <B><FONT COLOR="#BC8F8F">'n'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;n&quot;</FONT></B>), LOWER_O(111, <B><FONT COLOR="#BC8F8F">'o'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;o&quot;</FONT></B>),
  LOWER_P(112, <B><FONT COLOR="#BC8F8F">'p'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;p&quot;</FONT></B>), LOWER_Q(113, <B><FONT COLOR="#BC8F8F">'q'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;q&quot;</FONT></B>), LOWER_R(114, <B><FONT COLOR="#BC8F8F">'r'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;r&quot;</FONT></B>), LOWER_S(115,<B><FONT COLOR="#BC8F8F">'s'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;s&quot;</FONT></B>), LOWER_T(116, <B><FONT COLOR="#BC8F8F">'t'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;t&quot;</FONT></B>),
  LOWER_U(117, <B><FONT COLOR="#BC8F8F">'u'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;u&quot;</FONT></B>), LOWER_V(118, <B><FONT COLOR="#BC8F8F">'v'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;v&quot;</FONT></B>), LOWER_W(119, <B><FONT COLOR="#BC8F8F">'w'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;w&quot;</FONT></B>), LOWER_X(120, <B><FONT COLOR="#BC8F8F">'x'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;x&quot;</FONT></B>), LOWER_Y(121, <B><FONT COLOR="#BC8F8F">'y'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;y&quot;</FONT></B>),
  LOWER_Z(122, <B><FONT COLOR="#BC8F8F">'z'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;z&quot;</FONT></B>),

  <I><FONT COLOR="#B22222">// uppercase letters
</FONT></I>  UPPER_A(65, <B><FONT COLOR="#BC8F8F">'A'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;A&quot;</FONT></B>), UPPER_B(66, <B><FONT COLOR="#BC8F8F">'B'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;B&quot;</FONT></B>), UPPER_C(67, <B><FONT COLOR="#BC8F8F">'C'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;C&quot;</FONT></B>), UPPER_D(68, <B><FONT COLOR="#BC8F8F">'D'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;D&quot;</FONT></B>), UPPER_E(69, <B><FONT COLOR="#BC8F8F">'E'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;E&quot;</FONT></B>),
  UPPER_F(70, <B><FONT COLOR="#BC8F8F">'F'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;F&quot;</FONT></B>), UPPER_G(71, <B><FONT COLOR="#BC8F8F">'G'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;G&quot;</FONT></B>), UPPER_H(72, <B><FONT COLOR="#BC8F8F">'H'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;H&quot;</FONT></B>), UPPER_I(73, <B><FONT COLOR="#BC8F8F">'I'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;I&quot;</FONT></B>), UPPER_J(74, <B><FONT COLOR="#BC8F8F">'J'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;J&quot;</FONT></B>),
  UPPER_K(75, <B><FONT COLOR="#BC8F8F">'K'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;K&quot;</FONT></B>), UPPER_L(76, <B><FONT COLOR="#BC8F8F">'L'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;L&quot;</FONT></B>), UPPER_M(77, <B><FONT COLOR="#BC8F8F">'M'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;M&quot;</FONT></B>), UPPER_N(78, <B><FONT COLOR="#BC8F8F">'N'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;N&quot;</FONT></B>), UPPER_O(79, <B><FONT COLOR="#BC8F8F">'O'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;O&quot;</FONT></B>),
  UPPER_P(80, <B><FONT COLOR="#BC8F8F">'P'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;P&quot;</FONT></B>), UPPER_Q(81, <B><FONT COLOR="#BC8F8F">'Q'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;Q&quot;</FONT></B>), UPPER_R(82, <B><FONT COLOR="#BC8F8F">'R'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;R&quot;</FONT></B>), UPPER_S(83, <B><FONT COLOR="#BC8F8F">'S'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;S&quot;</FONT></B>), UPPER_T(84, <B><FONT COLOR="#BC8F8F">'T'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;T&quot;</FONT></B>),
  UPPER_U(85, <B><FONT COLOR="#BC8F8F">'U'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;U&quot;</FONT></B>), UPPER_V(86, <B><FONT COLOR="#BC8F8F">'V'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;V&quot;</FONT></B>), UPPER_W(87, <B><FONT COLOR="#BC8F8F">'W'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;W&quot;</FONT></B>), UPPER_X(88, <B><FONT COLOR="#BC8F8F">'X'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;X&quot;</FONT></B>), UPPER_Y(89, <B><FONT COLOR="#BC8F8F">'Y'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;Y&quot;</FONT></B>),
  UPPER_Z(90, <B><FONT COLOR="#BC8F8F">'Z'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;Z&quot;</FONT></B>),


  <I><FONT COLOR="#B22222">// numbers
</FONT></I>  ZERO(48, <B><FONT COLOR="#BC8F8F">'0'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;0&quot;</FONT></B>), ONE(49, <B><FONT COLOR="#BC8F8F">'1'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;1&quot;</FONT></B>), TWO(50, <B><FONT COLOR="#BC8F8F">'2'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;2&quot;</FONT></B>), THREE(51, <B><FONT COLOR="#BC8F8F">'3'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;3&quot;</FONT></B>), FOUR(52, <B><FONT COLOR="#BC8F8F">'4'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;4&quot;</FONT></B>), FIVE(53, <B><FONT COLOR="#BC8F8F">'5'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;5&quot;</FONT></B>),
  SIX(54, <B><FONT COLOR="#BC8F8F">'6'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;6&quot;</FONT></B>), SEVEN(55, <B><FONT COLOR="#BC8F8F">'7'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;7&quot;</FONT></B>), EIGHT(56, <B><FONT COLOR="#BC8F8F">'8'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;8&quot;</FONT></B>), NINE(57, <B><FONT COLOR="#BC8F8F">'9'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;9&quot;</FONT></B>),

  <I><FONT COLOR="#B22222">// special characters
</FONT></I>  PERIOD(46, <B><FONT COLOR="#BC8F8F">'.'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;.&quot;</FONT></B>), COMMA(44, <B><FONT COLOR="#BC8F8F">','</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;,&quot;</FONT></B>), COLON(58, <B><FONT COLOR="#BC8F8F">':'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;:&quot;</FONT></B>), SEMICOLON(59, <B><FONT COLOR="#BC8F8F">';'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;;&quot;</FONT></B>), QUESTION_MARK(63, <B><FONT COLOR="#BC8F8F">'?'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;?&quot;</FONT></B>),
  EXCLAMATION_POINT(33, <B><FONT COLOR="#BC8F8F">'!'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;!&quot;</FONT></B>), TILDE(126, <B><FONT COLOR="#BC8F8F">'~'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;~&quot;</FONT></B>), UNDERSCORE(95, <B><FONT COLOR="#BC8F8F">'_'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;_&quot;</FONT></B>), MINUS(45, <B><FONT COLOR="#BC8F8F">'-'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;-&quot;</FONT></B>), PLUS(43, <B><FONT COLOR="#BC8F8F">'+'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;+&quot;</FONT></B>),
  BACKSLASH(92, <B><FONT COLOR="#BC8F8F">'\\'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\\&quot;</FONT></B>), FORWARD_SLASH(47, <B><FONT COLOR="#BC8F8F">'/'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;/&quot;</FONT></B>), GRAVE(96, <B><FONT COLOR="#BC8F8F">'`'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;`&quot;</FONT></B>), LEFT_BRACKET(91, <B><FONT COLOR="#BC8F8F">'['</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;[&quot;</FONT></B>),
  RIGHT_BRACKET(93, <B><FONT COLOR="#BC8F8F">']'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;]&quot;</FONT></B>), QUOTE(34, <B><FONT COLOR="#BC8F8F">'&quot;'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\&quot;&quot;</FONT></B>), APOSTROPHE(39, <B><FONT COLOR="#BC8F8F">'\''</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;\'&quot;</FONT></B>), LEFT_CURLY_BRACKET(123, <B><FONT COLOR="#BC8F8F">'{'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;{&quot;</FONT></B>),
  RIGHT_CURLY_BRACKET(125, <B><FONT COLOR="#BC8F8F">'}'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;}&quot;</FONT></B>), LESS_THAN(60, <B><FONT COLOR="#BC8F8F">'&lt;'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;&lt;&quot;</FONT></B>), GREATER_THAN(62, <B><FONT COLOR="#BC8F8F">'&gt;'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;&gt;&quot;</FONT></B>), EQUAL(61, <B><FONT COLOR="#BC8F8F">'='</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;=&quot;</FONT></B>),

  
  BACK_QUOTE(96, <B><FONT COLOR="#BC8F8F">'`'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;`&quot;</FONT></B>), VERTICAL_BAR(124, <B><FONT COLOR="#BC8F8F">'|'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;|&quot;</FONT></B>), AT(64, <B><FONT COLOR="#BC8F8F">'@'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;@&quot;</FONT></B>), POUND(35, <B><FONT COLOR="#BC8F8F">'#'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;#&quot;</FONT></B>), CARET(94, <B><FONT COLOR="#BC8F8F">'^'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;^&quot;</FONT></B>),
  AMPERSAND(38, <B><FONT COLOR="#BC8F8F">'&amp;'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;&amp;&quot;</FONT></B>), ASTERISK(42, <B><FONT COLOR="#BC8F8F">'*'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;*&quot;</FONT></B>), LEFT_PARENTHESIS(40, <B><FONT COLOR="#BC8F8F">'('</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;(&quot;</FONT></B>), RIGHT_PARENTHESIS(41, <B><FONT COLOR="#BC8F8F">')'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;)&quot;</FONT></B>),
  PERCENT(37, <B><FONT COLOR="#BC8F8F">'%'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;%&quot;</FONT></B>),

  <I><FONT COLOR="#B22222">// mod keys
</FONT></I>  BACKSPACE(127, <B><FONT COLOR="#BC8F8F">'\b'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;Backspace&quot;</FONT></B>), SPACE(32, <B><FONT COLOR="#BC8F8F">' '</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;Space&quot;</FONT></B>), TAB(9, <B><FONT COLOR="#BC8F8F">'\t'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;Tab&quot;</FONT></B>), ENTER(13, <B><FONT COLOR="#BC8F8F">'\n'</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;Enter&quot;</FONT></B>),

  UP_ARROW(<B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B>[]{27, 91, 65}, <B><FONT COLOR="#BC8F8F">&quot;Up Arrow&quot;</FONT></B>), DOWN_ARROW(<B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B>[]{27, 91, 66}, <B><FONT COLOR="#BC8F8F">&quot;Down Arrow&quot;</FONT></B>),
  RIGHT_ARROW(<B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B>[]{27, 91, 67}, <B><FONT COLOR="#BC8F8F">&quot;Right Arrow&quot;</FONT></B>), LEFT_ARROW(<B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B>[]{27, 91, 68}, <B><FONT COLOR="#BC8F8F">&quot;Left Arrow&quot;</FONT></B>);

  
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B>[] codes;
  <B><FONT COLOR="#A020F0">private</FONT></B> Character key;
  <B><FONT COLOR="#A020F0">private</FONT></B> String name;

  Keycode(<B><FONT COLOR="#A020F0">int</FONT></B> code, Character key, String name) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.codes = <B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B>[]{code};
    <B><FONT COLOR="#A020F0">this</FONT></B>.key = key;
    <B><FONT COLOR="#A020F0">this</FONT></B>.name = name;
  }

  Keycode(<B><FONT COLOR="#A020F0">int</FONT></B>[] codes, String name) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.codes = codes;
    <B><FONT COLOR="#A020F0">this</FONT></B>.name = name;
    <B><FONT COLOR="#A020F0">this</FONT></B>.key = <B><FONT COLOR="#A020F0">null</FONT></B>;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B>[] getCodes() {
    <B><FONT COLOR="#A020F0">return</FONT></B> codes;
  }
  <B><FONT COLOR="#A020F0">public</FONT></B> Character getKey() {
    <B><FONT COLOR="#A020F0">return</FONT></B> key;
  }
  <B><FONT COLOR="#A020F0">public</FONT></B> String getName() {
    <B><FONT COLOR="#A020F0">return</FONT></B> name;
  }

  
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> Keycode find(<B><FONT COLOR="#A020F0">int</FONT></B> code) {
    <B><FONT COLOR="#A020F0">for</FONT></B> (Keycode key : Keycode.values()) {
      <B><FONT COLOR="#A020F0">if</FONT></B> (key.getCodes()[0] == code) {
        <B><FONT COLOR="#A020F0">return</FONT></B> key;
      }
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">null</FONT></B>;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> Keycode find(<B><FONT COLOR="#A020F0">int</FONT></B>[] codes) {
    <B><FONT COLOR="#A020F0">for</FONT></B> (Keycode key : Keycode.values()) {
      <B><FONT COLOR="#A020F0">if</FONT></B> (Arrays.equals(key.getCodes(), codes)) {
        <I><FONT COLOR="#B22222">// System.out.println(key.getName());
</FONT></I>        <B><FONT COLOR="#A020F0">return</FONT></B> key;
      }
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">null</FONT></B>;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> Keycode find(Character keychar) {
    <B><FONT COLOR="#A020F0">for</FONT></B> (Keycode key : Keycode.values()) {
      <B><FONT COLOR="#A020F0">if</FONT></B> (key.getKey().equals(keychar)) {
        <B><FONT COLOR="#A020F0">return</FONT></B> key;
      }
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">null</FONT></B>;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> Keycode find(String name) {
  	<B><FONT COLOR="#A020F0">for</FONT></B> (Keycode key : Keycode.values()) {
  		<B><FONT COLOR="#A020F0">if</FONT></B> (key.getName().equals(name)) {
  			<B><FONT COLOR="#A020F0">return</FONT></B> key;
  		}
  	}
  	<B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">null</FONT></B>;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> hasNext(<B><FONT COLOR="#A020F0">int</FONT></B>[] codes) {
    <B><FONT COLOR="#A020F0">for</FONT></B> (Keycode key : Keycode.values()) {
      <B><FONT COLOR="#A020F0">int</FONT></B>[] next = key.getCodes();
      <B><FONT COLOR="#A020F0">if</FONT></B> (codes.length &lt; next.length &amp;&amp; Arrays.equals(Arrays.copyOfRange(next, 0, codes.length), codes)) {
        <I><FONT COLOR="#B22222">// System.out.println(key);
</FONT></I>        <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">true</FONT></B>;
      }
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">false</FONT></B>;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> Keycode matchStart(<B><FONT COLOR="#A020F0">int</FONT></B>[] codes) {
    <B><FONT COLOR="#A020F0">for</FONT></B> (Keycode key : Keycode.values()) {
      <B><FONT COLOR="#A020F0">if</FONT></B> (Arrays.equals(key.getCodes(), Arrays.copyOfRange(codes, 0, key.getCodes().length))) {
        <I><FONT COLOR="#B22222">// System.out.println(key.getName());
</FONT></I>        <B><FONT COLOR="#A020F0">return</FONT></B> key;
      }
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">null</FONT></B>;
  }
}</PRE>
<HR>
<A NAME="file16">
<H1>./src/main/java/dev/gavinthomas/tictactoe/input/input.java 16/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file15">prev</A>][<A HREF="#file17">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.input;

<B><FONT COLOR="#A020F0">import</FONT></B> java.io.IOException;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.*;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.stream.IntStream;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.concurrent.ExecutorService;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.concurrent.Executors;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.concurrent.RejectedExecutionException;

<B><FONT COLOR="#A020F0">import</FONT></B> org.jline.terminal.*;
<B><FONT COLOR="#A020F0">import</FONT></B> org.jline.utils.*;
<B><FONT COLOR="#A020F0">import</FONT></B> org.jline.keymap.*;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">abstract</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> input {
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> initiated = <B><FONT COLOR="#A020F0">false</FONT></B>;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> readEnabled = <B><FONT COLOR="#A020F0">false</FONT></B>;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> List&lt;InputQueue.QueueType&gt; queue = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;InputQueue.QueueType&gt;();
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> ExecutorService exec = Executors.newSingleThreadExecutor();

  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> List&lt;Keybind&gt; KEYS = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Keybind&gt;();
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> List&lt;Integer&gt; stream = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Integer&gt;();
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> Terminal terminal;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> NonBlockingReader reader;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> BindingReader bindReader;


  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> init() {
    <B><FONT COLOR="#A020F0">if</FONT></B> (initiated) {
      <B><FONT COLOR="#A020F0">return</FONT></B>;
    }
    initiated = <B><FONT COLOR="#A020F0">true</FONT></B>;
    <B><FONT COLOR="#A020F0">try</FONT></B> {
      terminal = TerminalBuilder.builder().jna(<B><FONT COLOR="#A020F0">true</FONT></B>).system(<B><FONT COLOR="#A020F0">true</FONT></B>).build();

      terminal.enterRawMode();

      reader = terminal.reader();
      bindReader = <B><FONT COLOR="#A020F0">new</FONT></B> BindingReader(reader);
    } <B><FONT COLOR="#A020F0">catch</FONT></B> (IOException e) {
      e.printStackTrace();
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> toggleRead(<B><FONT COLOR="#A020F0">boolean</FONT></B> tog) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (!readEnabled &amp;&amp; tog) {
      <B><FONT COLOR="#A020F0">try</FONT></B> {
        exec.submit(input::read);
      } <B><FONT COLOR="#A020F0">catch</FONT></B> (RejectedExecutionException e) {
        exec = Executors.newSingleThreadExecutor();
        exec.submit(input::read);
      }
      readEnabled = <B><FONT COLOR="#A020F0">true</FONT></B>;
    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (readEnabled &amp;&amp; !tog) {
      readEnabled = <B><FONT COLOR="#A020F0">false</FONT></B>;
      exec.shutdownNow();
    }
  }
  
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> tread() {
    <B><FONT COLOR="#A020F0">while</FONT></B> (<B><FONT COLOR="#A020F0">true</FONT></B>) {
      <B><FONT COLOR="#A020F0">while</FONT></B> (readEnabled) {
        Keycode key = nextKey();
        <B><FONT COLOR="#A020F0">if</FONT></B> (!readEnabled) { <I><FONT COLOR="#B22222">// probably not needed when using shutdownNow since everything is halted.
</FONT></I>          <B><FONT COLOR="#A020F0">break</FONT></B>;
        }
        <B><FONT COLOR="#A020F0">if</FONT></B> (key == <B><FONT COLOR="#A020F0">null</FONT></B>) {
          <B><FONT COLOR="#A020F0">continue</FONT></B>;
        }
        <B><FONT COLOR="#A020F0">for</FONT></B> (Keybind kb : KEYS) {
          <B><FONT COLOR="#A020F0">if</FONT></B> (kb.hasKey(key)) {
            kb.handle(key);
          }
        }
      }
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> read() {
    checkerloop: <B><FONT COLOR="#A020F0">while</FONT></B> (<B><FONT COLOR="#A020F0">true</FONT></B>) {
      <B><FONT COLOR="#A020F0">try</FONT></B> {
        stream.add(bindReader.readCharacter());
        <I><FONT COLOR="#B22222">// Out.append(stream.size());
</FONT></I>        List&lt;InputQueue.QueueType&gt; queueCheck = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;InputQueue.QueueType&gt;(queue);
        List&lt;InputQueue.QueueType&gt; matched = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;InputQueue.QueueType&gt;();
<I><FONT COLOR="#B22222">//      System.out.println(queueCheck.size());
</FONT></I>        <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; queueCheck.size(); i++) {
<I><FONT COLOR="#B22222">//        System.out.print(i + &quot;, &quot;);
</FONT></I>          <B><FONT COLOR="#A020F0">if</FONT></B> (queueCheck.get(i).matches(stream)) {
            matched.add(queueCheck.get(i));
          } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (!queueCheck.get(i).matchStart(stream)) {
            queueCheck.remove(i);
          }
        }

        <B><FONT COLOR="#A020F0">if</FONT></B> (matched.size() != 0) {
          matched.sort(<B><FONT COLOR="#A020F0">new</FONT></B> Comparator&lt;InputQueue.QueueType&gt;() {
            <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> compare(InputQueue.QueueType q1, InputQueue.QueueType q2) {
              <B><FONT COLOR="#A020F0">if</FONT></B> (q1.priority() == q2.priority()) {
                <B><FONT COLOR="#A020F0">return</FONT></B> 0;
              }
              <B><FONT COLOR="#A020F0">return</FONT></B> (q1.priority() &lt; q2.priority() ? -1 : 1);
            }
          });

          <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; matched.size(); i++) {
            matched.get(i).run(stream);
            queue.remove(matched.get(i));
            <B><FONT COLOR="#A020F0">if</FONT></B> (matched.get(i).doNext()) {
              <B><FONT COLOR="#A020F0">continue</FONT></B>;
            } <B><FONT COLOR="#A020F0">else</FONT></B> {
              stream.clear();
              <B><FONT COLOR="#A020F0">continue</FONT></B> checkerloop;
            }
          }
        }

        <B><FONT COLOR="#A020F0">if</FONT></B> (queueCheck.size() &gt; 0) <B><FONT COLOR="#A020F0">continue</FONT></B>;

        Keycode matchCode = Keycode.find(stream.stream().mapToInt(Integer::intValue).toArray());

        <B><FONT COLOR="#A020F0">if</FONT></B> (matchCode == <B><FONT COLOR="#A020F0">null</FONT></B> &amp;&amp; !Keycode.hasNext(stream.stream().mapToInt(Integer::intValue).toArray())) {
          stream.clear();
          <B><FONT COLOR="#A020F0">continue</FONT></B>;
        }
        <B><FONT COLOR="#A020F0">try</FONT></B> {
          <B><FONT COLOR="#A020F0">for</FONT></B> (Keybind kb : KEYS) {
            <B><FONT COLOR="#A020F0">if</FONT></B> (kb.hasKey(matchCode)) {
              kb.handle(matchCode);
            }
          }
        } <B><FONT COLOR="#A020F0">catch</FONT></B> (ConcurrentModificationException ignore) {}
        <B><FONT COLOR="#A020F0">if</FONT></B> (!Keycode.hasNext(stream.stream().mapToInt(Integer::intValue).toArray())) {
          stream.clear();
        }
      } <B><FONT COLOR="#A020F0">catch</FONT></B> (Exception e) {
        e.printStackTrace();
      }
    }
  }


  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> checkNull(List&lt;InputQueue.QueueType&gt; qms) {
    <B><FONT COLOR="#A020F0">int</FONT></B> count = 0;
    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; qms.size(); i++) {
      count += (qms.get(i) != <B><FONT COLOR="#A020F0">null</FONT></B> ? 1 : 0);
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> count;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> Keycode nextKey() {
    List&lt;Integer&gt; codes = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Integer&gt;();
    List&lt;InputQueue.QueueType&gt; qms = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;InputQueue.QueueType&gt;(queue);

    <I><FONT COLOR="#B22222">// codes.add(bindReader.readCharacter());
</FONT></I>
    

    checkerloop: <B><FONT COLOR="#A020F0">while</FONT></B> (checkNull(qms) &gt; 0 || Keycode.hasNext(codes.stream().mapToInt(Integer::intValue).toArray())) {
      List&lt;InputQueue.QueueType&gt; matched = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;InputQueue.QueueType&gt;();
              <I><FONT COLOR="#B22222">// System.out.println(&quot;checkLoop&quot;); // ...............
</FONT></I>      
      codes.add(bindReader.readCharacter());
      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; qms.size(); i++) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (qms.get(i) == <B><FONT COLOR="#A020F0">null</FONT></B>) {
          qms.remove(i);
          <B><FONT COLOR="#A020F0">continue</FONT></B>;
        }

        <B><FONT COLOR="#A020F0">if</FONT></B> (qms.get(i).matches(codes)) {
          matched.add(qms.get(i));
        } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (!qms.get(i).matchStart(codes)) {
          qms.remove(i);
        }
      }

      
      <B><FONT COLOR="#A020F0">if</FONT></B> (matched.size() == 0) {
        <B><FONT COLOR="#A020F0">continue</FONT></B>;
      }
      Collections.sort(matched, <B><FONT COLOR="#A020F0">new</FONT></B> Comparator&lt;InputQueue.QueueType&gt;() {
        <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> compare(InputQueue.QueueType q1, InputQueue.QueueType q2) {
          <B><FONT COLOR="#A020F0">if</FONT></B> (q1.priority() == q2.priority()) {
            <B><FONT COLOR="#A020F0">return</FONT></B> 0;
          }
          <B><FONT COLOR="#A020F0">return</FONT></B> (q1.priority() &lt; q2.priority() ? -1 : 1);
        }
      });

      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; matched.size(); i++) {
        System.out.println(i);
        matched.get(i).run(codes);
        queue.remove(matched.get(i));
        <B><FONT COLOR="#A020F0">if</FONT></B> (matched.get(i).doNext()) {
          <B><FONT COLOR="#A020F0">continue</FONT></B>;
        } <B><FONT COLOR="#A020F0">else</FONT></B> {
          <I><FONT COLOR="#B22222">// break checkerloop; // Should break this loop as well. Check later.
</FONT></I>          <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">null</FONT></B>;
        }
      }
      <I><FONT COLOR="#B22222">// codes.add(bindReader.readCharacter());
</FONT></I>    }
    <B><FONT COLOR="#A020F0">while</FONT></B> (Keycode.hasNext(codes.stream().mapToInt(Integer::intValue).toArray())) {
      <I><FONT COLOR="#B22222">// System.out.println(bindReader.readCharacter());
</FONT></I>      codes.add(bindReader.readCharacter());
    }

    <B><FONT COLOR="#A020F0">return</FONT></B> Keycode.find(codes.stream().mapToInt(Integer::intValue).toArray());
  }

<I><FONT COLOR="#B22222">//  public static void getSizeReport() {
</FONT></I><I><FONT COLOR="#B22222">//    System.out.print(&quot;\033[s\033[50000;50000H\033[6n\033[u&quot;);
</FONT></I><I><FONT COLOR="#B22222">//    awaitingSizeReport = true;
</FONT></I><I><FONT COLOR="#B22222">//  }
</FONT></I>
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> addBinds(Keybind kb) {
    KEYS.add(kb);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> addBinds(Keybind kb, Keybind... kbs) {
    KEYS.add(kb);
    KEYS.addAll(Arrays.asList(kbs));
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> addBinds(List&lt;Keybind&gt; kbs) {
    KEYS.addAll(kbs);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> removeBinds(Keybind kb) {
    KEYS.remove(kb);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> removeBinds(Keybind kb, Keybind... kbs) {
    KEYS.remove(kb);
    KEYS.removeAll(Arrays.asList(kbs));
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> removeBinds(List&lt;Keybind&gt; kbs) {
    KEYS.removeAll(kbs);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> clearBinds() {
    KEYS.clear();
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> nextChar() {
    <B><FONT COLOR="#A020F0">return</FONT></B> bindReader.readCharacter();
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> arrContainsFinal(<B><FONT COLOR="#A020F0">int</FONT></B>[] arr, <B><FONT COLOR="#A020F0">int</FONT></B> key) {
    <B><FONT COLOR="#A020F0">final</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> val = key;
    <B><FONT COLOR="#A020F0">return</FONT></B> IntStream.of(arr).anyMatch(i -&gt; i == val);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> awaitKey(<B><FONT COLOR="#A020F0">int</FONT></B>[] validKeys) {
    <B><FONT COLOR="#A020F0">int</FONT></B> currKey = nextChar();
    <B><FONT COLOR="#A020F0">while</FONT></B> (arrContainsFinal(validKeys, currKey) == <B><FONT COLOR="#A020F0">false</FONT></B>) {
      System.out.println(currKey + <B><FONT COLOR="#BC8F8F">&quot; | &quot;</FONT></B> + (<B><FONT COLOR="#A020F0">char</FONT></B>) currKey);
      currKey = nextChar();
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> currKey;
  }
}</PRE>
<HR>
<A NAME="file17">
<H1>./src/main/java/dev/gavinthomas/tictactoe/ui/Menu.java 17/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file16">prev</A>][<A HREF="#file18">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.ui;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.TicTacToe;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.input.*;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.UIComponent;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.UIHolder;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.Visuals;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.utils.Term;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.ui.SelectionUI.Selection;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.utils.listeners;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.ArrayList;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.List;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Menu <B><FONT COLOR="#A020F0">implements</FONT></B> UIHolder {
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Term TERM = TicTacToe.CURR.TERM;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> List&lt;UIComponent&gt; comps = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;UIComponent&gt;();
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> List&lt;Keybind&gt; KBS = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Keybind&gt;();
  <B><FONT COLOR="#A020F0">private</FONT></B> Point offset;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Point size = <B><FONT COLOR="#A020F0">new</FONT></B> Point(90, 30);

  <B><FONT COLOR="#A020F0">public</FONT></B> Menu() {
    Selection[] sArr = {
        <B><FONT COLOR="#A020F0">new</FONT></B> Selection(<B><FONT COLOR="#BC8F8F">&quot;New Game&quot;</FONT></B>, <B><FONT COLOR="#A020F0">this</FONT></B>::temp, <B><FONT COLOR="#A020F0">new</FONT></B> Object[]{}),
        <B><FONT COLOR="#A020F0">new</FONT></B> Selection(<B><FONT COLOR="#BC8F8F">&quot;Load Game&quot;</FONT></B>, <B><FONT COLOR="#A020F0">this</FONT></B>::temp, <B><FONT COLOR="#A020F0">new</FONT></B> Object[]{}),
        <B><FONT COLOR="#A020F0">new</FONT></B> Selection(<B><FONT COLOR="#BC8F8F">&quot;Settings&quot;</FONT></B>, <B><FONT COLOR="#A020F0">this</FONT></B>::temp, <B><FONT COLOR="#A020F0">new</FONT></B> Object[]{})
    };

<I><FONT COLOR="#B22222">//    comps.get(0).render();
</FONT></I>    SelectionUI sui = <B><FONT COLOR="#A020F0">new</FONT></B> SelectionUI(<B><FONT COLOR="#A020F0">this</FONT></B>, sArr, <B><FONT COLOR="#A020F0">new</FONT></B> Point((size().x / 2) - 10, 10));
    comps.add(sui);
    comps.add(<B><FONT COLOR="#A020F0">new</FONT></B> Title(<B><FONT COLOR="#A020F0">this</FONT></B>, <B><FONT COLOR="#A020F0">new</FONT></B> Point((size().x / 2) - 39, 1)));
    KBS.add(<B><FONT COLOR="#A020F0">new</FONT></B> Keybind(
        <B><FONT COLOR="#A020F0">new</FONT></B> Keycode[] { Keycode.UP_ARROW },
        <B><FONT COLOR="#A020F0">new</FONT></B> Object[] { KeybindArgument.KEYCODE }, sui::moveUp));
    KBS.add(<B><FONT COLOR="#A020F0">new</FONT></B> Keybind(
        <B><FONT COLOR="#A020F0">new</FONT></B> Keycode[] { Keycode.DOWN_ARROW },
        <B><FONT COLOR="#A020F0">new</FONT></B> Object[] { KeybindArgument.KEYCODE }, sui::moveDown));
    KBS.add(<B><FONT COLOR="#A020F0">new</FONT></B> Keybind(
        <B><FONT COLOR="#A020F0">new</FONT></B> Keycode[] { Keycode.SPACE },
        <B><FONT COLOR="#A020F0">new</FONT></B> Object[] { KeybindArgument.KEYCODE }, sui::select));
    TicTacToe.CURR.registerKB(KBS);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> endTasks() {
    <B><FONT COLOR="#A020F0">for</FONT></B> (UIComponent comp : comps) {
      comp.endTasks();
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> render() {
    <B><FONT COLOR="#A020F0">for</FONT></B> (UIComponent comp : comps) {
      comp.endTasks();
    }
    TERM.clear(<B><FONT COLOR="#A020F0">true</FONT></B>);
    TERM.hideCursor(<B><FONT COLOR="#A020F0">true</FONT></B>);
    Point tSize = TicTacToe.CURR.SIZE;
<I><FONT COLOR="#B22222">//    offset = new Point((tSize.x / 2) - (size().x / 2), (tSize.y / 2) - (size().y / 2));
</FONT></I>    offset = <B><FONT COLOR="#A020F0">new</FONT></B> Point((tSize.x / 2) - (size().x / 2), 1);
    TERM.setCursorPos(offset.x, offset.y);
    TERM.print(Visuals.doubleLineBox(size.x, size.y));

    <B><FONT COLOR="#A020F0">for</FONT></B> (UIComponent comp : comps) {
      comp.render();
    }

<I><FONT COLOR="#B22222">//    System.out.print(tempFill.repeat(15));
</FONT></I>
<I><FONT COLOR="#B22222">//    comps.get(0).render();
</FONT></I>  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> temp(Object[] args) {

  }

  <B><FONT COLOR="#A020F0">public</FONT></B> Point offset() {
<I><FONT COLOR="#B22222">//    return new Point(offset.x + 2, offset.y + 1);
</FONT></I>    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">new</FONT></B> Point(offset.x + 1, offset.y + 1);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> Point size() {
<I><FONT COLOR="#B22222">//    return new Point(size.x - 4, size.y - 2);
</FONT></I>    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">new</FONT></B> Point(size.x - 2, size.y - 2);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> setLocation(Point pos, String str) {
    TERM.saveCursor();
    TERM.setCursorPos(pos.x, pos.y);
    System.out.print(str);
    TERM.restoreCursor();
  }
}
</PRE>
<HR>
<A NAME="file18">
<H1>./src/main/java/dev/gavinthomas/tictactoe/ui/SelectionUI.java 18/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file17">prev</A>][<A HREF="#file19">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.ui;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.TicTacToe;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.UIComponent;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.UIHolder;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.Visuals;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.utils.Term;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.Arrays;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.List;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.function.Consumer;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.function.Function;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> SelectionUI <B><FONT COLOR="#A020F0">implements</FONT></B> UIComponent {
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Term TERM = TicTacToe.CURR.TERM;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String[] uiFormatting = {<B><FONT COLOR="#BC8F8F">&quot;\033[1m&gt; &quot;</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot; &lt;\033[0m&quot;</FONT></B>};
  <B><FONT COLOR="#A020F0">private</FONT></B> Selection selected;
  <B><FONT COLOR="#A020F0">private</FONT></B> Point pos;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> UIHolder holder;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> List&lt;Selection&gt; selections;
  java.util.concurrent.Semaphore s = <B><FONT COLOR="#A020F0">new</FONT></B> java.util.concurrent.Semaphore(0);

  <B><FONT COLOR="#A020F0">public</FONT></B> SelectionUI(UIHolder holder, Selection[] selections, Point pos) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.selections = Arrays.asList(selections);
    <B><FONT COLOR="#A020F0">this</FONT></B>.pos = pos;
    <B><FONT COLOR="#A020F0">this</FONT></B>.holder = holder;
<I><FONT COLOR="#B22222">//    this.setSelected(this.selections.get(findNotDisabled(-1, true)));
</FONT></I>  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> render() {
    setCursorPos(pos.x, pos.y);
    TERM.print(getRender());
    <B><FONT COLOR="#A020F0">if</FONT></B> (selected == <B><FONT COLOR="#A020F0">null</FONT></B>) {
      setSelected(selections.get(findNotDisabled(-1, <B><FONT COLOR="#A020F0">true</FONT></B>)));
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> endTasks() {}

  <B><FONT COLOR="#A020F0">public</FONT></B> String getRender() {
    StringBuilder vals = <B><FONT COLOR="#A020F0">new</FONT></B> StringBuilder();
    <B><FONT COLOR="#A020F0">for</FONT></B> (Selection s : selections) {
      vals.append(SelectionUI.getComp(s.NAME, s.mode, selections.indexOf(s) != selections.size() - 1));
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> vals.toString();
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> disable(Selection val, <B><FONT COLOR="#A020F0">boolean</FONT></B> tog) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (selected != val) {
      val.mode = (tog ? MODE.DISABLED : MODE.NORMAL);
      <B><FONT COLOR="#A020F0">return</FONT></B>;
    }
    <B><FONT COLOR="#A020F0">int</FONT></B> thisIndex = selections.indexOf(val);
    <B><FONT COLOR="#A020F0">int</FONT></B> newIndex = (findNotDisabled(thisIndex, <B><FONT COLOR="#A020F0">false</FONT></B>) != -1 ?
        findNotDisabled(thisIndex, <B><FONT COLOR="#A020F0">false</FONT></B>) :
        findNotDisabled(thisIndex, <B><FONT COLOR="#A020F0">true</FONT></B>));
    val.mode = MODE.DISABLED;
    setSelected(selections.get(newIndex));
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> setCursorPos(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y) {
    TERM.setCursorPos(holder.offset().x + x, holder.offset().y + y);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> setSelected(Selection newSelect) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (selected != <B><FONT COLOR="#A020F0">null</FONT></B>) {
      setCursorPos(pos.x, pos.y + (selections.indexOf(selected) * 3));
      TERM.print(SelectionUI.getComp(selected.NAME,
          (selected.mode == MODE.SELECTED ? MODE.NORMAL : MODE.DISABLED),
          <B><FONT COLOR="#A020F0">false</FONT></B>));
      selected.mode = (selected.mode == MODE.SELECTED ? MODE.NORMAL : selected.mode);
    }
    <B><FONT COLOR="#A020F0">this</FONT></B>.selected = newSelect;
    setCursorPos(pos.x, pos.y + (selections.indexOf(selected) * 3));
    TERM.print(SelectionUI.getComp(selected.NAME, MODE.SELECTED, <B><FONT COLOR="#A020F0">false</FONT></B>));
    newSelect.mode = MODE.SELECTED;
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> moveUp(Object[] args) {
    <B><FONT COLOR="#A020F0">int</FONT></B> sInd = selections.indexOf(selected);
    <B><FONT COLOR="#A020F0">int</FONT></B> next = findNotDisabled(selections.indexOf(selected), <B><FONT COLOR="#A020F0">false</FONT></B>);
    <B><FONT COLOR="#A020F0">if</FONT></B> (next == -1) <B><FONT COLOR="#A020F0">return</FONT></B>;
    setSelected(selections.get(next));
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> moveDown(Object[] args) {
    <B><FONT COLOR="#A020F0">int</FONT></B> sInd = selections.indexOf(selected);
    <B><FONT COLOR="#A020F0">int</FONT></B> next = findNotDisabled(selections.indexOf(selected), <B><FONT COLOR="#A020F0">true</FONT></B>);
    <B><FONT COLOR="#A020F0">if</FONT></B> (next == -1) <B><FONT COLOR="#A020F0">return</FONT></B>;
    setSelected(selections.get(next));
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> select(Object[] args) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (selected == <B><FONT COLOR="#A020F0">null</FONT></B>) <B><FONT COLOR="#A020F0">return</FONT></B>;
    selected.RUNNER.accept(selected.args);
  }

  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> findNotDisabled(<B><FONT COLOR="#A020F0">int</FONT></B> start, <B><FONT COLOR="#A020F0">boolean</FONT></B> posIncrement) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (posIncrement) {
      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = start + 1; i &lt; selections.size(); i++) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (selections.get(i).mode != MODE.DISABLED) <B><FONT COLOR="#A020F0">return</FONT></B> i;
      }
    } <B><FONT COLOR="#A020F0">else</FONT></B> {
      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = start - 1; i &gt;= 0; i--) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (selections.get(i).mode != MODE.DISABLED) <B><FONT COLOR="#A020F0">return</FONT></B> i;
      }
    }
    <B><FONT COLOR="#A020F0">return</FONT></B> -1;
  }


  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Selection {
    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> String NAME;
    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Consumer&lt;Object[]&gt; RUNNER;
    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> disabled = <B><FONT COLOR="#A020F0">false</FONT></B>;
    <B><FONT COLOR="#A020F0">public</FONT></B> MODE mode = MODE.NORMAL;
    <B><FONT COLOR="#A020F0">public</FONT></B> Object[] args;

    <B><FONT COLOR="#A020F0">public</FONT></B> Selection(String name, Consumer&lt;Object[]&gt; runner, Object[] args) {
      <B><FONT COLOR="#A020F0">this</FONT></B>.NAME = name;
      <B><FONT COLOR="#A020F0">this</FONT></B>.RUNNER = runner;
      <B><FONT COLOR="#A020F0">this</FONT></B>.args = args;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> run() {
      <B><FONT COLOR="#A020F0">this</FONT></B>.RUNNER.accept(args);
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> String getComp(String name, MODE mode, <B><FONT COLOR="#A020F0">boolean</FONT></B> cursorMove) {
    <B><FONT COLOR="#A020F0">return</FONT></B> Visuals.menuButton(name, mode) + (cursorMove ? <B><FONT COLOR="#BC8F8F">&quot;\033[1B\033[20D&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> enum MODE {
    DISABLED, NORMAL, SELECTED
  }
}
</PRE>
<HR>
<A NAME="file19">
<H1>./src/main/java/dev/gavinthomas/tictactoe/ui/Title.java 19/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file18">prev</A>][<A HREF="#file20">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe.ui;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.TicTacToe;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.UIComponent;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.UIHolder;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.Visuals;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.utils.Term;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.concurrent.ExecutorService;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.concurrent.Executors;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.concurrent.RejectedExecutionException;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.function.BiConsumer;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Title <B><FONT COLOR="#A020F0">implements</FONT></B> UIComponent {
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Term TERM = TicTacToe.CURR.TERM;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Point pos;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> UIHolder holder;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> <B><FONT COLOR="#A020F0">long</FONT></B> animStart = 0;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> animRunning = <B><FONT COLOR="#A020F0">false</FONT></B>;
  <B><FONT COLOR="#A020F0">private</FONT></B> ExecutorService animExec;
<I><FONT COLOR="#B22222">//  private final AnimProps[] anims = {
</FONT></I><I><FONT COLOR="#B22222">//      new AnimProps(50, 1000, this::titleAnim1),
</FONT></I><I><FONT COLOR="#B22222">//      new AnimProps(250, 2000, this::titleAnim2),
</FONT></I><I><FONT COLOR="#B22222">//  };
</FONT></I>  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> AnimProps[] anims = {
      <B><FONT COLOR="#A020F0">new</FONT></B> AnimProps(50, 1, <B><FONT COLOR="#A020F0">this</FONT></B>::titleAnim1),
      <B><FONT COLOR="#A020F0">new</FONT></B> AnimProps(250, 6, <B><FONT COLOR="#A020F0">this</FONT></B>::titleAnim2),
  };

  <B><FONT COLOR="#A020F0">public</FONT></B> Title(UIHolder holder, Point pos) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.holder = holder;
    <B><FONT COLOR="#A020F0">this</FONT></B>.pos = pos;
    <B><FONT COLOR="#A020F0">this</FONT></B>.animExec = Executors.newSingleThreadExecutor();
  }
  
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> render() {
    toggleAnimations(<B><FONT COLOR="#A020F0">false</FONT></B>);
    setCursorPos(pos.x, pos.y);
    TERM.print(Visuals.title(<B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B>[]{<B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>}));
    toggleAnimations(<B><FONT COLOR="#A020F0">true</FONT></B>);
  }
  
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> toggleAnimations(<B><FONT COLOR="#A020F0">boolean</FONT></B> tog) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (tog) {
      <B><FONT COLOR="#A020F0">if</FONT></B> (animStart != 0) animExec.shutdownNow();
      <B><FONT COLOR="#A020F0">try</FONT></B> {
        animExec.submit(<B><FONT COLOR="#A020F0">this</FONT></B>::startAnimations);
      } <B><FONT COLOR="#A020F0">catch</FONT></B> (RejectedExecutionException e) {
        animExec = Executors.newSingleThreadExecutor();
        animExec.submit(<B><FONT COLOR="#A020F0">this</FONT></B>::startAnimations);
      }
    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (animStart != 0) {
      animStart = 0;
      animExec.shutdownNow();
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> endTasks() {
    toggleAnimations(<B><FONT COLOR="#A020F0">false</FONT></B>);
  }

  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> startAnimations() {
    <B><FONT COLOR="#A020F0">long</FONT></B> selfStartTime = System.currentTimeMillis();
    Point lastSize = TicTacToe.CURR.SIZE;
    animStart = selfStartTime;

    <B><FONT COLOR="#A020F0">try</FONT></B> {
      Thread.sleep(1000);
    } <B><FONT COLOR="#A020F0">catch</FONT></B> (InterruptedException ignored) {}
    <B><FONT COLOR="#A020F0">if</FONT></B> (TicTacToe.CURR.SIZE != lastSize) <B><FONT COLOR="#A020F0">return</FONT></B>;

    AnimProps current = <B><FONT COLOR="#A020F0">null</FONT></B>;

    <B><FONT COLOR="#A020F0">while</FONT></B> (animStart == selfStartTime) {
      AnimProps rand;
      <B><FONT COLOR="#A020F0">do</FONT></B> {
        rand = anims[(<B><FONT COLOR="#A020F0">int</FONT></B>) (Math.random() * anims.length)];
      } <B><FONT COLOR="#A020F0">while</FONT></B> (rand == current);
      current = rand;
      rand.RUNNER.accept(rand.DELAY, rand.DURATION);
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> setCursorPos(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y) {
    TERM.setCursorPos(holder.offset().x + x, holder.offset().y + y);
  }
  
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> titleAnim1(Integer delay, Integer duration) {
    <B><FONT COLOR="#A020F0">long</FONT></B> startTime = System.currentTimeMillis();
<I><FONT COLOR="#B22222">//    while (System.currentTimeMillis() - startTime &lt; duration) {
</FONT></I>    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> rep = 1; rep &lt;= duration; rep++) {
      <B><FONT COLOR="#A020F0">boolean</FONT></B>[] currOn = {<B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>};
      <B><FONT COLOR="#A020F0">int</FONT></B> step = -2;
      <B><FONT COLOR="#A020F0">while</FONT></B> (step &lt; 10) {
<I><FONT COLOR="#B22222">//        if (System.currentTimeMillis() - startTime &lt; duration) break;
</FONT></I>        <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = step; i &lt; step + 3; i++) {
          <B><FONT COLOR="#A020F0">if</FONT></B> (i &gt; 8 || i &lt; 0) <B><FONT COLOR="#A020F0">continue</FONT></B>;
          currOn[i] = <B><FONT COLOR="#A020F0">true</FONT></B>;
        }
        setCursorPos(pos.x, pos.y);
        TERM.print(Visuals.title(currOn));
        step++;
        currOn = <B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B>[]{<B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>};
        <B><FONT COLOR="#A020F0">try</FONT></B> {
          Thread.sleep(delay);
        } <B><FONT COLOR="#A020F0">catch</FONT></B> (InterruptedException ignore) {
        }
      }
      step = 9;
      <B><FONT COLOR="#A020F0">while</FONT></B> (step &gt; -2) {
<I><FONT COLOR="#B22222">//        if (System.currentTimeMillis() - startTime &lt; duration) break;
</FONT></I>        <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = step; i &gt; step - 3; i--) {
          <B><FONT COLOR="#A020F0">if</FONT></B> (i &gt; 8 || i &lt; 0) <B><FONT COLOR="#A020F0">continue</FONT></B>;
          currOn[i] = <B><FONT COLOR="#A020F0">true</FONT></B>;
        }
        setCursorPos(pos.x, pos.y);
        TERM.print(Visuals.title(currOn));
        step--;
        currOn = <B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B>[]{<B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>};
        <B><FONT COLOR="#A020F0">try</FONT></B> {
          Thread.sleep(delay);
        } <B><FONT COLOR="#A020F0">catch</FONT></B> (InterruptedException ignore) {
        }
      }
    }
    setCursorPos(pos.x, pos.y);
    TERM.print(Visuals.title(<B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B>[]{<B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>}));
  }

  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> titleAnim2(Integer delay, Integer duration) {
    <B><FONT COLOR="#A020F0">long</FONT></B> startTime = System.currentTimeMillis();
    <B><FONT COLOR="#A020F0">int</FONT></B> i = 0;
<I><FONT COLOR="#B22222">//    while(System.currentTimeMillis() - startTime &lt; duration) {
</FONT></I>    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> rep = 1; rep &lt;= duration; rep++) {
      <B><FONT COLOR="#A020F0">boolean</FONT></B>[] currOn = (i % 2 == 0 ?
          <B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B>[]{<B><FONT COLOR="#A020F0">true</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">true</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">true</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">true</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">true</FONT></B>} :
          <B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B>[]{<B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">true</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">true</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">true</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">true</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>});
      setCursorPos(pos.x, pos.y);
      TERM.print(Visuals.title(currOn));
      <B><FONT COLOR="#A020F0">try</FONT></B> {
        Thread.sleep(delay);
      } <B><FONT COLOR="#A020F0">catch</FONT></B> (InterruptedException ignore) {
      }
      i++;
    }
    setCursorPos(pos.x, pos.y);
    TERM.print(Visuals.title(<B><FONT COLOR="#A020F0">new</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B>[]{<B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>, <B><FONT COLOR="#A020F0">false</FONT></B>}));
  }
}

<B><FONT COLOR="#A020F0">class</FONT></B> AnimProps {
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Integer DELAY, DURATION;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> BiConsumer&lt;Integer, Integer&gt; RUNNER;
  <B><FONT COLOR="#A020F0">public</FONT></B> AnimProps(<B><FONT COLOR="#A020F0">int</FONT></B> DELAY, <B><FONT COLOR="#A020F0">int</FONT></B> DURATION, BiConsumer&lt;Integer, Integer&gt; RUNNER) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.DELAY = DELAY;
    <B><FONT COLOR="#A020F0">this</FONT></B>.DURATION = DURATION;
    <B><FONT COLOR="#A020F0">this</FONT></B>.RUNNER = RUNNER;
  }
}
</PRE>
<HR>
<A NAME="file20">
<H1>./src/main/java/dev/gavinthomas/tictactoe/Board.java 20/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file19">prev</A>][<A HREF="#file21">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.ArrayList;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.Arrays;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.List;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.UIHolder;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.Visuals;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.utils.Term;

<I><FONT COLOR="#B22222">// 100x34 min size
</FONT></I><B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Board <B><FONT COLOR="#A020F0">implements</FONT></B> UIHolder {
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Term TERM = TicTacToe.CURR.TERM;
  <B><FONT COLOR="#A020F0">private</FONT></B> Point offset;
  <B><FONT COLOR="#A020F0">private</FONT></B> PieceType[] plrs = <B><FONT COLOR="#A020F0">new</FONT></B> PieceType[2];
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> PieceType[][] grid = <B><FONT COLOR="#A020F0">new</FONT></B> PieceType[3][3];
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> tempGetCompMove = <B><FONT COLOR="#A020F0">false</FONT></B>;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Point brdOffset = <B><FONT COLOR="#A020F0">new</FONT></B> Point(21, 0);
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> List&lt;Point&gt; highlights = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Point&gt;();

  <B><FONT COLOR="#A020F0">public</FONT></B> Board(<B><FONT COLOR="#A020F0">int</FONT></B> xPlr) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.plrs[xPlr] = PieceType.X;
    <B><FONT COLOR="#A020F0">this</FONT></B>.plrs[(xPlr == 0 ? 1 : 0)] = PieceType.O;

    <B><FONT COLOR="#A020F0">for</FONT></B> (PieceType[] arr : grid) {
      Arrays.fill(arr, PieceType.BLANK);
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> Point offset() {
    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">new</FONT></B> Point();
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> Point size() {
    <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">new</FONT></B> Point();
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> setPiece(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y, PieceType piece) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (TicTacToe.CURR.invalidSize) <B><FONT COLOR="#A020F0">return</FONT></B>;
    TERM.saveCursor();
    TERM.setCursorPos(TicTacToe.OFFSET.x + brdOffset.x + (5 + (x * 20)),
        TicTacToe.OFFSET.y + (2 + (Math.abs(y - (grid.length - 1)) * 10)));

    <B><FONT COLOR="#A020F0">if</FONT></B> (piece == PieceType.X) {
      System.out.print(Visuals.XBLOCK);
    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (piece == PieceType.O) {
      System.out.print(Visuals.OBLOCK);
    } <B><FONT COLOR="#A020F0">else</FONT></B> {
      System.out.print(Visuals.BLANKBLOCK);
    }
    TERM.restoreCursor();
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> highlightSpot(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y, <B><FONT COLOR="#A020F0">boolean</FONT></B> tog) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (tog &amp;&amp; highlights.stream().noneMatch(pt -&gt; pt.equals(<B><FONT COLOR="#A020F0">new</FONT></B> Point(x, y)))) {
      highlights.add(<B><FONT COLOR="#A020F0">new</FONT></B> Point(x, y));
    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (!tog) {
      highlights.removeIf(pt -&gt; pt.equals(<B><FONT COLOR="#A020F0">new</FONT></B> Point(x, y)));
    }
    <B><FONT COLOR="#A020F0">if</FONT></B> (TicTacToe.CURR.invalidSize) <B><FONT COLOR="#A020F0">return</FONT></B>;
    TERM.saveCursor();
    TERM.setCursorPos(TicTacToe.OFFSET.x + brdOffset.x + (1 + (x * 20)),
        TicTacToe.OFFSET.y + (1 + (Math.abs(y - (grid.length - 1))
            * 10)));

    <B><FONT COLOR="#A020F0">if</FONT></B> (tog) {
      System.out.print(Visuals.HIGHLIGHT);
    } <B><FONT COLOR="#A020F0">else</FONT></B> {
      System.out.print(Visuals.UNHIGHLIGHT);
    }
    

    TERM.restoreCursor();
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> render() {
    <B><FONT COLOR="#A020F0">if</FONT></B> (TicTacToe.CURR.invalidSize) <B><FONT COLOR="#A020F0">return</FONT></B>;
    TERM.clear(<B><FONT COLOR="#A020F0">true</FONT></B>);
    TERM.hideCursor(<B><FONT COLOR="#A020F0">true</FONT></B>);
    System.out.println(<B><FONT COLOR="#BC8F8F">&quot;\n&quot;</FONT></B>.repeat(TicTacToe.OFFSET.y) +
        <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>.repeat(TicTacToe.OFFSET.x) + <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>.repeat(brdOffset.x) +
        Visuals.GRID + <B><FONT COLOR="#BC8F8F">&quot;\n\n&quot;</FONT></B>);

    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; grid.length; i++) {
      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> j = 0; j &lt; grid[i].length; j++) {
        setPiece(i, j, grid[i][j]);
      }
    }
    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; highlights.size(); i++) {
      Point pt = highlights.get(i);
      highlights.remove(i);
      highlightSpot(pt.x, pt.y, <B><FONT COLOR="#A020F0">true</FONT></B>);
    }

<I><FONT COLOR="#B22222">//    highlightSpot(0, 0, true);
</FONT></I>  }

  <B><FONT COLOR="#A020F0">public</FONT></B> PieceType getPiece(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (x &gt; 2 || x &lt; 0 || y &gt; 2 || y &lt; 0) <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">null</FONT></B>;
    <B><FONT COLOR="#A020F0">return</FONT></B> grid[x][y];
  }
  
  <B><FONT COLOR="#A020F0">public</FONT></B> enum PieceType {
    X, O, BLANK
  }
}</PRE>
<HR>
<A NAME="file21">
<H1>./src/main/java/dev/gavinthomas/tictactoe/Game.java 21/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file20">prev</A>][<A HREF="#file22">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.input.Keybind;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.input.KeybindArgument;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.input.Keycode;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.input.input;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.opponents.Computer;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.opponents.Player;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.Opponent;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board.PieceType;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.TTT;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.ArrayList;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.List;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Game {
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Board board;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Opponent[] plrs = <B><FONT COLOR="#A020F0">new</FONT></B> Opponent[2];
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> List&lt;Keybind&gt; KBS = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;Keybind&gt;();
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> currentTurn;
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">volatile</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> finished = <B><FONT COLOR="#A020F0">false</FONT></B>;
  <B><FONT COLOR="#A020F0">private</FONT></B> Keybind inputKB;

  <B><FONT COLOR="#A020F0">public</FONT></B> Game(Builder config) {
    <B><FONT COLOR="#A020F0">this</FONT></B>.board = <B><FONT COLOR="#A020F0">new</FONT></B> Board(config.firstMove);
    currentTurn = config.firstMove;
    plrs[0] = <B><FONT COLOR="#A020F0">new</FONT></B> Player(<B><FONT COLOR="#A020F0">this</FONT></B>.board, (config.firstMove == 0 ? PieceType.X : PieceType.O), <B><FONT COLOR="#A020F0">this</FONT></B>::handleMove);
    <B><FONT COLOR="#A020F0">if</FONT></B> (config.computer) {
      plrs[1] = <B><FONT COLOR="#A020F0">new</FONT></B> Computer(<B><FONT COLOR="#A020F0">this</FONT></B>.board, (config.firstMove == 1 ? PieceType.X : PieceType.O), <B><FONT COLOR="#A020F0">this</FONT></B>::handleMove);
    } <B><FONT COLOR="#A020F0">else</FONT></B> {
      plrs[1] = <B><FONT COLOR="#A020F0">new</FONT></B> Player(<B><FONT COLOR="#A020F0">this</FONT></B>.board, (config.firstMove == 1 ? PieceType.X : PieceType.O), <B><FONT COLOR="#A020F0">this</FONT></B>::handleMove);
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> start() {
    KBS.add(<B><FONT COLOR="#A020F0">new</FONT></B> Keybind(
        <B><FONT COLOR="#A020F0">new</FONT></B> Keycode[] { Keycode.UP_ARROW, Keycode.DOWN_ARROW, Keycode.LEFT_ARROW, Keycode.RIGHT_ARROW, Keycode.SPACE, Keycode.LOWER_L },
        <B><FONT COLOR="#A020F0">new</FONT></B> Object[] { KeybindArgument.KEYCODE }, ((Player) plrs[0])::handleInput));
    <B><FONT COLOR="#A020F0">if</FONT></B> (plrs[1] <B><FONT COLOR="#A020F0">instanceof</FONT></B> Player) {
      KBS.add(<B><FONT COLOR="#A020F0">new</FONT></B> Keybind(
          <B><FONT COLOR="#A020F0">new</FONT></B> Keycode[] { Keycode.UP_ARROW, Keycode.DOWN_ARROW, Keycode.LEFT_ARROW, Keycode.RIGHT_ARROW, Keycode.SPACE, Keycode.LOWER_L },
          <B><FONT COLOR="#A020F0">new</FONT></B> Object[] { KeybindArgument.KEYCODE }, ((Player) plrs[1])::handleInput));
    }
    <B><FONT COLOR="#A020F0">this</FONT></B>.board.render();
<I><FONT COLOR="#B22222">//    input.toggleRead(true);
</FONT></I>
<I><FONT COLOR="#B22222">//    input.addBinds(KBS);
</FONT></I>    TicTacToe.CURR.registerKB(KBS);
    plrs[currentTurn].getMove();
<I><FONT COLOR="#B22222">//    while (!TTT.gameOver(board.grid)) {
</FONT></I>    <B><FONT COLOR="#A020F0">while</FONT></B> (!finished) {
      Thread.onSpinWait();
    }

<I><FONT COLOR="#B22222">//    System.out.println(TTT.getWinner(board.grid));
</FONT></I>
<I><FONT COLOR="#B22222">//    input.removeBinds(KBS);
</FONT></I>    TicTacToe.CURR.deregisterKB(KBS);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> render() {
    <B><FONT COLOR="#A020F0">this</FONT></B>.board.render();
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> handleMove(Point pt) {
    board.setPiece(pt.x, pt.y, plrs[currentTurn].getPiece());
    board.grid[pt.x][pt.y] = plrs[currentTurn].getPiece();
<I><FONT COLOR="#B22222">//    System.out.println(TTT.gameOver(board.grid));
</FONT></I>    <B><FONT COLOR="#A020F0">if</FONT></B> (TTT.gameOver(board.grid)) {
      finished = <B><FONT COLOR="#A020F0">true</FONT></B>;
      <B><FONT COLOR="#A020F0">return</FONT></B>;
    }
    currentTurn = (currentTurn == 0 ? 1 : 0);
    <B><FONT COLOR="#A020F0">if</FONT></B> (plrs[1] <B><FONT COLOR="#A020F0">instanceof</FONT></B> Player) {
      ((Player) plrs[currentTurn]).getMove(pt.x, pt.y);
    } <B><FONT COLOR="#A020F0">else</FONT></B> {
      plrs[currentTurn].getMove();
    }
  }


  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> input(Object[] args) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (plrs[currentTurn] <B><FONT COLOR="#A020F0">instanceof</FONT></B> Player tempPlr) {
      tempPlr.handleInput(args);
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Builder {
    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> computer = <B><FONT COLOR="#A020F0">true</FONT></B>; <I><FONT COLOR="#B22222">// playing against computer
</FONT></I>    <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">int</FONT></B> firstMove = (<B><FONT COLOR="#A020F0">int</FONT></B>) (2 * Math.random());

    <B><FONT COLOR="#A020F0">public</FONT></B> Builder computerOpponent() {
      <B><FONT COLOR="#A020F0">this</FONT></B>.computer = <B><FONT COLOR="#A020F0">true</FONT></B>;
      <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">this</FONT></B>;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> Builder playerOpponent() {
      <B><FONT COLOR="#A020F0">this</FONT></B>.computer = <B><FONT COLOR="#A020F0">false</FONT></B>;
      <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">this</FONT></B>;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> Builder firstMove(<B><FONT COLOR="#A020F0">int</FONT></B> plr) {
      <B><FONT COLOR="#A020F0">if</FONT></B> (plr != 0 &amp;&amp; plr != 1)
        <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">this</FONT></B>;
      <B><FONT COLOR="#A020F0">this</FONT></B>.firstMove = plr;
      <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">this</FONT></B>;
    }

    <B><FONT COLOR="#A020F0">public</FONT></B> Game build() {
      <B><FONT COLOR="#A020F0">return</FONT></B> <B><FONT COLOR="#A020F0">new</FONT></B> Game(<B><FONT COLOR="#A020F0">this</FONT></B>);
    }
  }
}
</PRE>
<HR>
<A NAME="file22">
<H1>./src/main/java/dev/gavinthomas/tictactoe/Main.java 22/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file21">prev</A>][<A HREF="#file23">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.input.input;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.Visuals;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board.PieceType;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.TicTacToe;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.TTT;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.ui.Menu;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.utils.Minimax;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.utils.Term;
<B><FONT COLOR="#A020F0">import</FONT></B> io.raffi.drawille.Canvas;
<B><FONT COLOR="#A020F0">import</FONT></B> io.raffi.drawille.Turtle;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.Arrays;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.List;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.Scanner;


<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Main {
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> PieceType X = PieceType.X;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> PieceType O = PieceType.O;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> abc = <B><FONT COLOR="#A020F0">true</FONT></B>;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Term TERM = <B><FONT COLOR="#A020F0">new</FONT></B> Term();

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> main(String[] args) <B><FONT COLOR="#A020F0">throws</FONT></B> Exception {

<I><FONT COLOR="#B22222">//    System.out.println(Visuals.title1(new boolean[]{true, true, true}));
</FONT></I>
<I><FONT COLOR="#B22222">//System.out.println(Visuals.box(40, 20));
</FONT></I>    TicTacToe tttG = <B><FONT COLOR="#A020F0">new</FONT></B> TicTacToe();
    tttG.init(); 
    <B><FONT COLOR="#A020F0">while</FONT></B> (abc) {
<I><FONT COLOR="#B22222">//      Thread.onSpinWait();
</FONT></I>      tttG.newGame(<B><FONT COLOR="#A020F0">new</FONT></B> Game.Builder().playerOpponent().firstMove(0));
    }

<I><FONT COLOR="#B22222">//    Game g = new Game.Builder().computerOpponent().firstMove(0).build();
</FONT></I><I><FONT COLOR="#B22222">//    g.start();
</FONT></I>

<I><FONT COLOR="#B22222">//    Turtle turtle = new Turtle ( 75, 50 );
</FONT></I><I><FONT COLOR="#B22222">//    turtle.move ( turtle.getWidth () / 2, turtle.getHeight () / 2 );
</FONT></I><I><FONT COLOR="#B22222">//    turtle.down ();
</FONT></I><I><FONT COLOR="#B22222">//    for ( int x = 0; x &lt; 72; x++ ) {
</FONT></I><I><FONT COLOR="#B22222">//      turtle.right ( 20 );
</FONT></I><I><FONT COLOR="#B22222">//      for ( int y = 0; y &lt; 72; y++ ) {
</FONT></I><I><FONT COLOR="#B22222">//        turtle.right ( 20 );
</FONT></I><I><FONT COLOR="#B22222">//        turtle.forward ( 10 );
</FONT></I><I><FONT COLOR="#B22222">//      }
</FONT></I><I><FONT COLOR="#B22222">//    }
</FONT></I><I><FONT COLOR="#B22222">//    turtle.render ();
</FONT></I><I><FONT COLOR="#B22222">//    System.out.println(Visuals.TITLE);
</FONT></I>      <I><FONT COLOR="#B22222">//    new Menu().render();
</FONT></I>      <I><FONT COLOR="#B22222">//    input.toggleRead(true);
</FONT></I>      <I><FONT COLOR="#B22222">//    while (Main.abc) {
</FONT></I>      <I><FONT COLOR="#B22222">//      Thread.onSpinWait();
</FONT></I>      <I><FONT COLOR="#B22222">//    }
</FONT></I>    <I><FONT COLOR="#B22222">// System.out.print(&quot;\033[2J\033[H&quot;);
</FONT></I>
<I><FONT COLOR="#B22222">//     Board b = new Board(1);
</FONT></I><I><FONT COLOR="#B22222">//     TicTacToe t = new TicTacToe();
</FONT></I><I><FONT COLOR="#B22222">//     b.render();
</FONT></I><I><FONT COLOR="#B22222">//     t.newGame(new Game.Builder().computerOpponent().firstMove(0));
</FONT></I>
    PieceType[][] pta = <B><FONT COLOR="#A020F0">new</FONT></B> PieceType[4][4];
    <B><FONT COLOR="#A020F0">for</FONT></B> (PieceType[] pieceTypes : pta) {
      Arrays.fill(pieceTypes, PieceType.BLANK);
    }

    <I><FONT COLOR="#B22222">// pta[4][0] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[3][1] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[2][2] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[1][3] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[0][4] = X;
</FONT></I>
    <I><FONT COLOR="#B22222">// pta[0][0] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[1][1] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[2][2] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[3][3] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[4][4] = X;
</FONT></I>
<I><FONT COLOR="#B22222">//    pta[0][0] = X;
</FONT></I><I><FONT COLOR="#B22222">//    pta[1][0] = X;
</FONT></I><I><FONT COLOR="#B22222">//    pta[2][0] = O;
</FONT></I>
    String[] brd = {
        <B><FONT COLOR="#BC8F8F">&quot;O - X O&quot;</FONT></B>,
        <B><FONT COLOR="#BC8F8F">&quot;X - O O&quot;</FONT></B>,
        <B><FONT COLOR="#BC8F8F">&quot;X O X X&quot;</FONT></B>,
        <B><FONT COLOR="#BC8F8F">&quot;X - - O&quot;</FONT></B>,
    };
<I><FONT COLOR="#B22222">//    String[] brd = {
</FONT></I><I><FONT COLOR="#B22222">//        &quot;OXO&quot;,
</FONT></I><I><FONT COLOR="#B22222">//        &quot;XOX&quot;,
</FONT></I><I><FONT COLOR="#B22222">//        &quot;XOX&quot;,
</FONT></I><I><FONT COLOR="#B22222">//    };
</FONT></I>
    <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i = 0; i &lt; brd.length; i++) {
      <B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> j = 0; j &lt; brd[i].length(); j += 2) {
        <B><FONT COLOR="#A020F0">if</FONT></B> (brd[i].charAt(j) == <B><FONT COLOR="#BC8F8F">'-'</FONT></B>) <B><FONT COLOR="#A020F0">continue</FONT></B>;
<I><FONT COLOR="#B22222">//        pta[Math.abs(i - brd.length + 1)][j] = (brd[i].charAt(j) == 'X' ? X : O);
</FONT></I>        pta[j / 2][Math.abs(i - brd.length + 1)] = (brd[i].charAt(j) == <B><FONT COLOR="#BC8F8F">'X'</FONT></B> ? X : O);
      }
    }
<I><FONT COLOR="#B22222">//    pta[0][1] = O;
</FONT></I><I><FONT COLOR="#B22222">//    pta[1][1] = O;
</FONT></I><I><FONT COLOR="#B22222">//    pta[2][1] = O;
</FONT></I><I><FONT COLOR="#B22222">//    pta[2][2] = X;
</FONT></I>
    <I><FONT COLOR="#B22222">// pta[0][0] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[1][0] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[2][0] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[3][0] = X;
</FONT></I>    <I><FONT COLOR="#B22222">// pta[4][0] = X;
</FONT></I>    <B><FONT COLOR="#A020F0">long</FONT></B> ts = System.currentTimeMillis();
<I><FONT COLOR="#B22222">//    System.out.println(TTT.getWinner(pta));
</FONT></I>    Point rval = <B><FONT COLOR="#A020F0">new</FONT></B> Minimax(O).getBest(pta);
    System.out.println(<B><FONT COLOR="#BC8F8F">&quot;------------------------&quot;</FONT></B>);
    System.out.println(rval.x + <B><FONT COLOR="#BC8F8F">&quot;, &quot;</FONT></B> + rval.y);
    System.out.println(<B><FONT COLOR="#A020F0">new</FONT></B> Minimax(O));
    System.out.println(System.currentTimeMillis() - ts);
    <I><FONT COLOR="#B22222">// // String temp = &quot;&quot;&quot;
</FONT></I>    <I><FONT COLOR="#B22222">// //   abct
</FONT></I><I><FONT COLOR="#B22222">//    // // &quot;&quot;&quot;;
</FONT></I><I><FONT COLOR="#B22222">//    String temp = &quot;\n&quot;;
</FONT></I><I><FONT COLOR="#B22222">//    System.out.println(((int) temp.charAt(0)));
</FONT></I>
<I><FONT COLOR="#B22222">//    new Scanner(System.in).nextLine(); // no auto exit
</FONT></I>  }
}</PRE>
<HR>
<A NAME="file23">
<H1>./src/main/java/dev/gavinthomas/tictactoe/TicTacToe.java 23/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file22">prev</A>][<A HREF="#file24">next</A>]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> dev.gavinthomas.tictactoe;

<B><FONT COLOR="#A020F0">import</FONT></B> java.awt.Point;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.ArrayList;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.List;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.concurrent.ExecutorService;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.concurrent.Executors;

<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.input.*;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.opponents.Computer;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.opponents.Player;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.Opponent;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Board.PieceType;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.Game;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.UIHolder;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.types.Visuals;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.ui.Menu;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.utils.Term;
<B><FONT COLOR="#A020F0">import</FONT></B> dev.gavinthomas.tictactoe.utils.listeners;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> TicTacToe {
  <B><FONT COLOR="#A020F0">private</FONT></B> List&lt;Keybind&gt; KBS = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;&gt;();
  <B><FONT COLOR="#A020F0">private</FONT></B> List&lt;Keybind&gt; KBSDIS = <B><FONT COLOR="#A020F0">new</FONT></B> ArrayList&lt;&gt;();
  <B><FONT COLOR="#A020F0">private</FONT></B> Game game;
  <B><FONT COLOR="#A020F0">private</FONT></B> UIHolder currentUI;
  <B><FONT COLOR="#A020F0">private</FONT></B> Keybind menuKBS;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> invalidSize = <B><FONT COLOR="#A020F0">true</FONT></B>;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Term TERM = <B><FONT COLOR="#A020F0">new</FONT></B> Term();
  <B><FONT COLOR="#A020F0">private</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Term privTerm = <B><FONT COLOR="#A020F0">new</FONT></B> Term();
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> TicTacToe CURR;
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Point SIZE = <B><FONT COLOR="#A020F0">new</FONT></B> Point(0, 0);
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">final</FONT></B> Point OFFSET = <B><FONT COLOR="#A020F0">new</FONT></B> Point(0, 0);

  <B><FONT COLOR="#A020F0">public</FONT></B> TicTacToe() {
    TicTacToe.CURR = <B><FONT COLOR="#A020F0">this</FONT></B>;
    <B><FONT COLOR="#A020F0">this</FONT></B>.init();
  }
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> init() {
    <B><FONT COLOR="#A020F0">new</FONT></B> listeners.terminalResizeListener(<B><FONT COLOR="#A020F0">this</FONT></B>::resized);
    input.init();
    input.toggleRead(<B><FONT COLOR="#A020F0">true</FONT></B>);
    TERM.requestSize(<B><FONT COLOR="#A020F0">this</FONT></B>::updateTermSize);
    menuKBS = <B><FONT COLOR="#A020F0">new</FONT></B> Keybind(
        <B><FONT COLOR="#A020F0">new</FONT></B> Keycode[] { Keycode.UP_ARROW, Keycode.DOWN_ARROW, Keycode.LEFT_ARROW, Keycode.RIGHT_ARROW, Keycode.SPACE, Keycode.LOWER_L },
        <B><FONT COLOR="#A020F0">new</FONT></B> Object[] { KeybindArgument.KEYCODE }, <B><FONT COLOR="#A020F0">this</FONT></B>::input);
    input.addBinds(menuKBS);
<I><FONT COLOR="#B22222">//    currentUI = new Menu();
</FONT></I><I><FONT COLOR="#B22222">//    currentUI.render();
</FONT></I>  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> newGame(Game.Builder gameConfig) {
    menuKBS.set.enabled(<B><FONT COLOR="#A020F0">false</FONT></B>);
    <B><FONT COLOR="#A020F0">this</FONT></B>.game = <B><FONT COLOR="#A020F0">new</FONT></B> Game(gameConfig);
    <B><FONT COLOR="#A020F0">this</FONT></B>.game.start();
    menuKBS.set.enabled(<B><FONT COLOR="#A020F0">true</FONT></B>);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> registerKB(Keybind kb) {
    KBS.add(kb);
    input.addBinds(kb);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> registerKB(List&lt;Keybind&gt; kb) {
    KBS.addAll(kb);
    input.addBinds(kb);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> deregisterKB(List&lt;Keybind&gt; kb) {
    KBS.removeAll(kb);
    input.removeBinds(kb);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> resized() {
    TERM.requestSize(<B><FONT COLOR="#A020F0">this</FONT></B>::updateTermSize);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> render() {
    <B><FONT COLOR="#A020F0">if</FONT></B> (game != <B><FONT COLOR="#A020F0">null</FONT></B>) {
      game.render();
      <B><FONT COLOR="#A020F0">return</FONT></B>;
    }
    <B><FONT COLOR="#A020F0">if</FONT></B> (currentUI == <B><FONT COLOR="#A020F0">null</FONT></B>) <B><FONT COLOR="#A020F0">return</FONT></B>;
    currentUI.render();
  }


  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> renderSizeUI(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y) {
    TERM.clear(<B><FONT COLOR="#A020F0">true</FONT></B>);
    TERM.hideCursor(<B><FONT COLOR="#A020F0">true</FONT></B>);
    TERM.saveCursor();
    System.out.print(<B><FONT COLOR="#BC8F8F">&quot;█▀▀▀\033[1B\033[4D█&quot;</FONT></B>);
    TERM.setCursorPos(x - 3, 1);
    System.out.print(<B><FONT COLOR="#BC8F8F">&quot;▀▀▀█\033[1B█&quot;</FONT></B>);
    TERM.setCursorPos(1, y - 1);
    System.out.print(<B><FONT COLOR="#BC8F8F">&quot;█\033[1B\033[2D█▄▄▄&quot;</FONT></B>);
    TERM.setCursorPos(x, y - 1);
    System.out.print(<B><FONT COLOR="#BC8F8F">&quot;█\033[1B\033[3D▄▄▄█&quot;</FONT></B>);
    TERM.restoreCursor();
    <B><FONT COLOR="#A020F0">if</FONT></B> (x &lt; 30 || y &lt; 10) <B><FONT COLOR="#A020F0">return</FONT></B>;
    TERM.setCursorPos((<B><FONT COLOR="#A020F0">int</FONT></B>) Math.ceil((x / 2.0) - 9.5), (y / 2) - 2);
    System.out.print(Visuals.sizeUI(x, y, 100, 32));
<I><FONT COLOR="#B22222">//    System.out.print(Visuals.sizeBorder(x, y));
</FONT></I>  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> updateTermSize(<B><FONT COLOR="#A020F0">int</FONT></B> x, <B><FONT COLOR="#A020F0">int</FONT></B> y) {
    SIZE.x = x;
    SIZE.y = y;
    <B><FONT COLOR="#A020F0">if</FONT></B> (x &lt; 100 || y &lt; 32) {
      <B><FONT COLOR="#A020F0">if</FONT></B> (currentUI <B><FONT COLOR="#A020F0">instanceof</FONT></B> Menu) ((Menu) currentUI).endTasks();
      <B><FONT COLOR="#A020F0">this</FONT></B>.invalidSize = <B><FONT COLOR="#A020F0">true</FONT></B>;
      <B><FONT COLOR="#A020F0">for</FONT></B> (Keybind kb : KBS) {
        kb.set.forceDisabled(<B><FONT COLOR="#A020F0">true</FONT></B>);
      }
      <B><FONT COLOR="#A020F0">this</FONT></B>.renderSizeUI(x, y);
      <B><FONT COLOR="#A020F0">return</FONT></B>;
    }

    <B><FONT COLOR="#A020F0">this</FONT></B>.invalidSize = <B><FONT COLOR="#A020F0">false</FONT></B>;
    <B><FONT COLOR="#A020F0">for</FONT></B> (Keybind kb : KBS) {
      kb.set.forceDisabled(<B><FONT COLOR="#A020F0">false</FONT></B>);
    }
    TicTacToe.OFFSET.x = (x - 100) / 2;
    TicTacToe.OFFSET.y = (y - 32) / 2;
    <B><FONT COLOR="#A020F0">this</FONT></B>.render();
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> updateTermSize(Object[] args) {
<I><FONT COLOR="#B22222">//    System.out.println(&quot;args1&quot;);
</FONT></I>    <B><FONT COLOR="#A020F0">if</FONT></B> (!(args[0] <B><FONT COLOR="#A020F0">instanceof</FONT></B> Point)) <B><FONT COLOR="#A020F0">return</FONT></B>;
<I><FONT COLOR="#B22222">//    System.out.println(&quot;args2&quot;);
</FONT></I>    updateTermSize(((Point) args[0]).x, ((Point) args[0]).y);
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> input(Object[] args) {

  }
}</PRE>
<HR>
<A NAME="file24">
<H1>./src/main/java/out/Out.java 24/24</H1>
[<A HREF="#top">top</A>][<A HREF="#file23">prev</A>][next]
<PRE>
<B><FONT COLOR="#A020F0">package</FONT></B> out;

<B><FONT COLOR="#A020F0">import</FONT></B> java.io.FileWriter;
<B><FONT COLOR="#A020F0">import</FONT></B> java.io.BufferedWriter;
<B><FONT COLOR="#A020F0">import</FONT></B> java.io.IOException;

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">abstract</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> Out {
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> append(String str) {
    <B><FONT COLOR="#A020F0">try</FONT></B> {
      BufferedWriter writer = <B><FONT COLOR="#A020F0">new</FONT></B> BufferedWriter(<B><FONT COLOR="#A020F0">new</FONT></B> FileWriter(<B><FONT COLOR="#BC8F8F">&quot;output.txt&quot;</FONT></B>, <B><FONT COLOR="#A020F0">true</FONT></B>));
      writer.append(str);
      writer.append(<B><FONT COLOR="#BC8F8F">'\n'</FONT></B>);

      writer.close();
    } <B><FONT COLOR="#A020F0">catch</FONT></B> (IOException e) {
    }
  }

  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> append(Object val) {
    append(String.valueOf(val));
  }
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> append(<B><FONT COLOR="#A020F0">int</FONT></B> val) {
    append(String.valueOf(val));
  }
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> append(<B><FONT COLOR="#A020F0">byte</FONT></B> val) {
    append(String.valueOf(val));
  }
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> append(<B><FONT COLOR="#A020F0">char</FONT></B> val) {
    append(String.valueOf(val));
  }
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> append(<B><FONT COLOR="#A020F0">double</FONT></B> val) {
    append(String.valueOf(val));
  }
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> append(<B><FONT COLOR="#A020F0">long</FONT></B> val) {
    append(String.valueOf(val));
  }
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> append(<B><FONT COLOR="#A020F0">float</FONT></B> val) {
    append(String.valueOf(val));
  }
  <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> append(<B><FONT COLOR="#A020F0">boolean</FONT></B> val) {
    append(String.valueOf(val));
  }
}</PRE>
<HR>
<ADDRESS>Generated by <A HREF="http://www.iki.fi/~mtr/genscript/">GNU Enscript 1.6.6</A>.</ADDRESS>
</BODY>
</HTML>
